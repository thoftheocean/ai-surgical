/*! For license information please see slardar.d5f6d8ce.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["65257"],{60012:function(e,t){"use strict";var r,n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function o(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var a=function(e){return JSON.stringify({ev_type:"batch",list:e})},s=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],u=function(){return{}};function c(e){return e}function l(e){return"object"==typeof e&&null!==e}var d=Object.prototype;function f(e){if(l(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===d||null===t}return"[object Object]"===d.toString.call(e)}return!1}function p(e){return"[object Array]"===d.toString.call(e)}function v(e){return"function"==typeof e}function h(e){return"number"==typeof e}function m(e){return"string"==typeof e}function g(e,t){if(!p(e)||0===e.length)return!1;for(var r=0;r<e.length;){if(e[r]===t)return!0;r++}return!1}var _=function(e,t){if(!p(e))return e;var r=e.indexOf(t);if(r>=0){var n=e.slice();return n.splice(r,1),n}return e},y=function(e,t,r){for(var n,o=i(t.split(".")),a=o[0],s=o.slice(1);e&&s.length>0;)e=e[a],a=(n=i(s))[0],s=n.slice(1);if(e)return r(e,a)},b=function(e,t){var r,n=p(r=e||[])&&r.length?function(e){for(var t=[],r=e.length,n=0;n<r;n++){var i=e[n];m(i)?t.push(i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):i&&i.source&&t.push(i.source)}return RegExp(t.join("|"),"i")}(r):null;return!!n&&n.test(t)};function w(e){try{return m(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var S=function(e,t,r,n){return void 0===n&&(n=!0),function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!e)return u;var c=e[t],l=r.apply(void 0,o([c],i(a),!1)),d=l;return v(d)&&n&&(d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return l.apply(this,e)}catch(t){return v(c)&&c.apply(this,e)}}),e[t]=d,function(r){r||(d===e[t]?e[t]=c:l=c)}}},E=function(e,t,r){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(!e)return u;var s=e[t],c=r.apply(void 0,o([s],i(n),!1)),l=c;return v(l)&&(l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(this,e)}),e[t]=l,function(){l===e[t]?e[t]=s:c=s}}},R="".padStart?function(e,t){return void 0===t&&(t=8),e.padStart(t," ")}:function(e){return e},C=0,T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,o(["[SDK]",Date.now(),R(""+C++)],i(e),!1))},x=0,k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,o(["[SDK]",Date.now(),R(""+x++)],i(e),!1))},O=function(e){return Math.random()<Number(e)},A=function(e,t){return e<Number(t)},P=function(e){return function(t){for(var r=t,n=0;n<e.length;n++)if(r)try{r=e[n](r)}catch(e){T(e)}else break;return r}};function j(){var e=function(){for(var e=Array(16),t=0,r=0;r<16;r++)(3&r)==0&&(t=0x100000000*Math.random()),e[r]=t>>>((3&r)<<3)&255;return e}();e[6]=15&e[6]|64,e[8]=63&e[8]|128;for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);var n=0;return""+t[e[n++]]+t[e[n++]]+t[e[n++]]+t[e[n++]]+"-"+t[e[n++]]+t[e[n++]]+"-"+t[e[n++]]+t[e[n++]]+"-"+t[e[n++]]+t[e[n++]]+"-"+t[e[n++]]+t[e[n++]]+t[e[n++]]+t[e[n++]]+t[e[n++]]+t[e[n++]]}var I=function(e,t,r){var n=0;return -1===r?u:function(){if(e()){n&&clearTimeout(n),n=0;return}0===n&&(n=setTimeout(t,r))}},M=function(e,t){var r=[];try{r=t.reduce(function(t,r){try{var n=r(e);"function"==typeof n&&t.push(n)}catch(e){}return t},[])}catch(e){}return function(e){return M(e,r)}},L=function(e){void 0===e&&(e=3e5);var t,r=[],n=[],i=!1,o=I(function(){return!!r.length},function(){i=!0,t&&t[0](),n.forEach(function(e){return e()}),n.length=0,t=void 0},e),a=function(e){r=_(r,e),i||o()};return{next:function(e){return M(e,r)},complete:function(e){n.push(e)},attach:function(e,r){t=[e,r]},subscribe:function(e){if(i)throw Error("Observer is closed");return r.push(e),t&&t[1]&&t[1](e),o(),function(){return a(e)}},unsubscribe:a}},D=function(e,t,r){var n=L(r);try{e(n.next,n.attach),t&&n.complete(t)}catch(e){}return[n.subscribe,n.unsubscribe]},N=function(e,t){var r=i(e,1)[0];return function(e,n){var i=r(function(r){return function(e){for(var r=!0,n=0;n<t.length;n++)if(r)try{r=t[n](e)}catch(e){T(e)}else break;return r}(r)?e(r):u});n(function(){i()})}},F=function(e,t,r,n){return e.destroyAgent.set(t,r,n)},q=function(e){var t,r,i,o=(t={},r={},i={set:function(e,n){return t[e]=n,r[e]=w(n),i},merge:function(e){return t=n(n({},t),e),Object.keys(e).forEach(function(t){r[t]=w(e[t])}),i},delete:function(e){return delete t[e],delete r[e],i},clear:function(){return t={},r={},i},get:function(e){return r[e]},toString:function(){return n({},r)}});e.provide("context",o),e.on("report",function(e){return e.extra||(e.extra={}),e.extra.context=o.toString(),e})},z=function(e,t,r){var n={},a=function(){for(var r,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var c=s[0];if(c){var l,d=c.split(".")[0];if(!(d in a)){var f=n[d]||[],p=null!=(r=null==t?void 0:t(e))?r:{};f.push(o([p],i(s),!1)),n[d]=f;return}return l=[].slice.call(s,1),y(a,c,function(e,t){if(e&&t in e&&v(e[t]))try{return e[t].apply(e,l)}catch(e){return}})}};for(var s in S(e,"provide",function(t){return function(r,n){a[r]=n,t.call(e,r,n)}})(),e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return e.on("provide",function(t){n[t]&&(n[t].forEach(function(t){var n=i(t),o=n[0],a=n.slice(1);null==r||r(e,o,a)}),n[t]=null)}),a};function B(e,t){return e.initSubject(t)}function G(e,t,r){var n=i(t,2),o=n[0],a=n[1],s=e.privateSubject||{};return s[o]||(s[o]=D(a,function(){s[o]=void 0},r)),s[o]}var H=function(){return Date.now()};function U(){if("object"==typeof window&&l(window))return window}function W(){if("object"==typeof document&&l(document))return document}function Y(){return U()&&window.location}function $(e){var t=W();if(!t||!e)return"";var r=t.createElement("a");return r.href=e,r.href}function V(e){var t=W();if(!t||!e)return{url:e,protocol:"",domain:"",query:"",path:"",hash:""};var r=t.createElement("a");r.href=e;var n=r.pathname||"/";return"/"!==n[0]&&(n="/"+n),{url:r.href,protocol:r.protocol.slice(0,-1),domain:r.hostname,query:r.search.substring(1),path:n,hash:r.hash}}function K(){var e=U()&&Y();return e?e.href:""}var X=function(e){var t,r={pid:(t=e.config()).pid,view_id:t.viewId,url:K()};return r.context=e.context?e.context.toString():{},r},J=function(e,t){void 0===t&&(t=!1);var r=X(e);return t&&(r.timestamp=H()),function(t){e.report(n(n({},t),{overrides:r}))}},Z=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar},Q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Z(U());r&&(r.errors||(r.errors=[]),r.errors.push(e))},ee=function(e){var t={url:K(),timestamp:H()},r=e.config();return(null==r?void 0:r.pid)&&(t.pid=r.pid),(null==e?void 0:e.context)&&(t.context=e.context.toString()),t},et=function(e,t){return function(r){var n=function(e){return e.overrides=t,e};e.on("report",n),r(),e.off("report",n)}},er=function(e,t,r,n){return void 0===n&&(n=!1),e.addEventListener(t,r,n),function(){e.removeEventListener(t,r,n)}},en=function(e,t,r,n){return void 0===n&&(n=!1),e.addEventListener(t,r,n),function(){e.removeEventListener(t,r,n)}},ei=function(e){var t=!1;return[function(r){!t&&(t=!0,e&&e(r))}]},eo=function(e){var t=U();if(t){var r=i(ei(e),1)[0];["unload","beforeunload","pagehide"].forEach(function(e){er(t,e,r,!1)})}},ea=function(e){var t=W(),r=U();if(t&&r){var n=u;n=en(t,"visibilitychange",function(){"visible"===t.visibilityState&&(e(),n())},!0)}},es=function(e,t){var r,n=W();if(n){var i=n.createElement("script");i.src=e,i.crossOrigin="anonymous",i.onload=t,null==(r=n.head)||r.appendChild(i)}},eu=function(e,t){return l(e)?n(n({},t),e):!!e&&t},ec=function(){return!!btoa&&!!atob},el=function(e){try{var t=localStorage.getItem(e),r=t;t&&"string"==typeof t&&(r=JSON.parse(ec()?decodeURI(atob(t)):t));var n=r,i=n.expires,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}(n,["expires"]);return i>=H()?o:void 0}catch(e){return}},ed=function(e,t,r){if(!(r<=0))try{var i;localStorage.setItem(e,(i=JSON.stringify(n(n({},t),{expires:H()+r})),ec()?btoa(encodeURI(i)):i))}catch(e){}},ef=function(e){return!1===e?0:!0!==e&&void 0!==e&&h(e)?e:7776e6},ep=function(){var e=RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i");return function(t){return e.test(t)}},ev=function(e){return function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t=i(r,2),this._method=t[0],this._url=t[1],e.apply(this,r)}},eh=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._reqHeaders=this._reqHeaders||{};var n=i(t,2),o=n[0],a=n[1];return this._reqHeaders[o]=a,e&&e.apply(this,t)}},em=function(e,t){var r=ep();return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this._start=H(),this._data=null==n?void 0:n[0],!r(this._url)){var o,a=t([this._method,this._url,this._start,this]);(o=this,E(o,"onreadystatechange",function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 4===this.readyState&&a(o),e&&e.apply(this,t)}}))()}return e.apply(this,n)}},eg=function(e){return function(t,r){if(e){var n=[];n.push(E(e,"open",ev)()),n.push(E(e,"setRequestHeader",eh)()),n.push(E(e,"send",em)(t)),r(function(){n.forEach(function(e){return e()})})}}},e_=function(e,t){return function(r,n){void 0===n&&(n={});var i=t([r,n]),o=e(r,n);return o.then(function(e){i(e)},function(){i(void 0)}),o}},ey=["fetch_0",function(e,t){var r=U();if(r&&fetch){var n=[];n.push(E(r,"fetch",e_)(e)),t(function(){n.forEach(function(e){return e()})})}}],eb=["resource"],ew=function(e,t,r){var n=e&&new e(function(e,n){e.getEntries?e.getEntries().forEach(function(e,r,i){return t(e,r,i,n)}):r&&r()});return[function(t){if(!e||!n)return r&&r();try{n.observe({entryTypes:t})}catch(e){return r&&r()}},function(t,i){if(!e||!n)return r&&r();try{var o={type:t,buffered:!0};void 0===i||(o.durationThreshold=i),n.observe(o)}catch(e){return r&&r()}n.observe({type:t,buffered:!1})},function(){return n&&n.disconnect()}]},eS=function(e,t,r){var n=i(ew(e,t),3),o=n[0],a=n[2];return o(r),a},eE=["resource_0",function(e,t){var r=function(){if(U()&&v(window.PerformanceObserver))return window.PerformanceObserver}();if(r){var n=ep();t(eS(r,function(t){n(t.name)||e(t)},eb))}}],eR="pageview",eC="session",eT="js_error",ex="http",ek="custom",eO="action",eA={sampleRate:1,origins:[]},eP=function(){var e=window&&(window.crypto||window.msCrypto);if(void 0!==e&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(t[0])+r(t[1])+r(t[2])+r(t[3])+r(t[4])+r(t[5])+r(t[6])+r(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)})},ej=function(e){var t=eu(e,eA);if(t&&O(t.sampleRate))return function(e,r){var n=t.origins;n.length&&b(n,e)&&r("traceparent","03-"+eP()+"-"+eP().substring(16)+"-01")}},eI=RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),eM=RegExp("(bearer|session)","i"),eL=function(e,t){return!e||!t||eI.test(e)||eM.test(t)},eD=function(e){var t=!1;return function(r){t||(t=!0,e(r))}},eN=function(e,t){try{if(t){var r=e.request.url;e.request.url=t(r),e.extra=n(n({},e.extra),{original_url:r})}}catch(e){}},eF=function(e,t,r){var n=i(t,2),o=n[0],a=n[1],s=r.setTraceHeader,c=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl;e.push(o[0](function(e){var t=i(e,4);t[0];var n=t[1];t[2];var o=t[3];if(!n)return u;var f=$(n);if(b(c,f))return u;s&&s(f,function(e,t){return o.setRequestHeader(e,t)});var p=l(),v=void 0,h=a()[0](function(e){f!==e.name||v||(v=e)});return function(e){var t=eq(e,r);setTimeout(function(){v&&(t.response.timing=v),eN(t,d),p&&p({ev_type:ex,payload:t}),h()},100)}}))},eq=function(e,t){var r,n=e._method,o=e._reqHeaders,a=e._url,s=e._start,u=e._data,c={api:"xhr",request:{url:$(a),method:(n||"").toLowerCase(),headers:o&&Object.keys(o).reduce(function(e,t){return eL(t,o[t])||(e[t.toLowerCase()]=o[t]),e},{}),timestamp:s},response:{status:e.status||0,is_custom_error:!1,timestamp:H()},duration:H()-s};"function"==typeof e.getAllResponseHeaders&&(c.response.headers=m(r=e.getAllResponseHeaders())&&r?r.split("\r\n").reduce(function(e,t){if(m(t)){var r=i(t.split(": "),2),n=r[0],o=r[1];eL(n,o)||(e[n.toLowerCase()]=o)}return e},{}):{});var l=c.response.status,d=t.collectBodyOnError,f=t.extraExtractor;try{var p=null==f?void 0:f(e.response,c,u);p&&(c.extra=p),p&&(c.response.is_custom_error=!0),d&&(p||l>=400)&&(c.request.body=u?""+u:void 0,c.response.body=e.response?""+e.response:void 0)}catch(e){}return c},ez="ajax",eB={autoWrap:!0,setContextAtReq:function(){return c},ignoreUrls:[],collectBodyOnError:!1},eG=function(e,t,r){var n=i(t,2),o=n[0],a=n[1],s=r.setTraceHeader,c=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl,f=window.Headers,p=window.Request;p&&f&&e.push(o[0](function(e){var t=i(e,2),n=t[0],o=t[1],v=$(n instanceof p?n.url:n);if(!eH(v)||b(c,v))return u;s&&s(v,function(e,t){return eW(e,t,n,o,p,f)});var h=l(),m=H(),g=void 0,_=a()[0](function(e){v!==e.name||g||(g=e)});return function(e){var t=eK(n,o,e,p,f,r,m),i=eD(function(e){g&&(e.response.timing=g),eN(e,d),h&&h({ev_type:ex,payload:e}),_()});setTimeout(function(){i(t)},1e3)}}))},eH=function(e){if(!m(e))return!1;var t=i(e.split(":"),2),r=t[0];return!t[1]||"http"===r||"https"===r},eU=function(e,t){return e instanceof t},eW=function(e,t,r,i,o,a){var s;eU(r,o)?r.headers.set(e,t):i.headers instanceof a?i.headers.set(e,t):i.headers=n(n({},i.headers),((s={})[e]=t,s))},eY=function(e,t,r){var n=t&&t.method||"get";return eU(e,r)&&(n=e.method||n),n.toLowerCase()},e$=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];try{return t.reduce(function(t,r){return new e(r||{}).forEach(function(e,r){return!eL(r,e)&&(t[r]=e)}),t},{})}catch(e){return{}}},eV=function(e,t,r){return eU(e,r)?e.body:null==t?void 0:t.body},eK=function(e,t,r,n,i,o,a){var s={api:"fetch",request:{method:eY(e,t,n),timestamp:a,url:$(e instanceof n?e.url:e),headers:e$(i,e.headers,t.headers)},response:{status:r&&r.status||0,is_custom_error:!1,timestamp:H()},duration:H()-a},c=o.collectBodyOnError,l=o.extraExtractor,d=function(){var r;c&&(s.request.body=null==(r=eV(e,t,n))?void 0:r.toString())};if(r)try{var f=e$(i,r.headers);s.response.headers=f;try{-1!==(f["content-type"]||"").indexOf("application/json")&&l&&r.clone().json().then(function(r){var i,o=l(r,s,null==(i=eV(e,t,n))?void 0:i.toString());o&&(s.extra=o,s.response.is_custom_error=!0,d())}).catch(u)}catch(e){}r.status>=400&&d()}catch(e){}else d();return s},eX="fetch",eJ={autoWrap:!0,setContextAtReq:function(){return c},ignoreUrls:[],collectBodyOnError:!1},eZ=["name","message","stack","filename","lineno","colno"],eQ=function(e){var t;return!function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMError]":case"[object DOMException]":return!0;default:return e instanceof Error}}(e)?(f(e)||"undefined"!=typeof Event&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)||m(e))&&(t={message:w(e)}):t=e&&l(e)?eZ.reduce(function(t,r){return t[r]=e[r],t},{}):e,t},e0=function(e){var t=eQ(e.error);if(!t)return t;var r=e.colno,n=e.lineno,i=e.filename;return r&&!t.colno&&(t.colno=String(r)),n&&!t.lineno&&(t.lineno=String(n)),i&&!t.filename&&(t.filename=i),t},e1=function(e){var t;try{var r=void 0;if("reason"in e?r=e.reason:"detail"in e&&"reason"in e.detail&&(r=e.detail.reason),r){var i=eQ(r);return n(n({},i),{name:null!=(t=i&&i.name)?t:"UnhandledRejection"})}}catch(e){}},e2=function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)?e0(e):"[object PromiseRejectionEvent]"===Object.prototype.toString.call(e)?e1(e):eQ(e)},e4="jsError",e3=function(e){return"hidden"===e.visibilityState},e6=["hidden_3",function(e,t){var r=W(),n=U();if(r&&n){var i=function(t){e("pagehide"===t.type||e3(r))},o=en(r,"visibilitychange",i,!0),a=er(n,"pagehide",i,!0);t(function(){o(),a()},function(e){e(e3(r))})}}],e5=["unload_0",function(e,t){var r=U();if(r){var n=i(ei(e),1)[0],o=function(){n()},a=[];["unload","beforeunload","pagehide"].forEach(function(e){a.push(er(r,e,o,!1))}),t(function(){a.forEach(function(e){return e()})})}}],e8=["hash_0",function(e,t){var r=U();if(r){var n=er(r,"hashchange",function(){return e(location.href)},!0);t(function(){n()})}}],e7=["history_0",function(e,t){var r=U()&&window.history,n=U();if(r&&n){var i=[],o=function(){return e(location.href)},a=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{e.apply(r,t)}finally{o()}}};i.push(S(r,"pushState",a)(),S(r,"replaceState",a)()),i.push(er(n,"popstate",o,!0)),t(function(){i.forEach(function(e){return e()})})}}],e9=function(e){return te(e,H())},te=function(e,t){return e+"_"+t},tt=function(e,t,r,n){var i=r,o=t;return n&&n(t),[function(t,r,a){"user_set"!==t&&r!==i?(i=r,o=null!=a?a:i,n&&n(o),e(t,o)):"user_set"===t&&r!==o&&(o=r,n&&n(o),e(t,o))},function(){t&&e("init",t)}]},tr=function(e,t){var r=t;return[function(t,n){n!==r&&e(t,r=n)}]},tn=function(e){return"manual"===e},ti="error_weight",to="duration_apdex",ta="perf_apdex",ts=function(){var e;return(e={error_count:[0,0,0,0],duration_count:[0,0,0]})[ta]={},e},tu=function(e,t){var r=e[0]+e[1]+e[2],n=e[0]/r;return e[2]/r>t.frustrating_threshold?2:n>t.satisfying_threshold||0===r?0:1},tc=function(){var e=0,t=void 0;return[function(r){r?t&&(e+=H()-t,t=void 0):t=H()},function(){t&&(e+=H()-t);var r=e;return e=0,t=H(),r}]},tl=function(e,t){return function(r,n){var i=r.payload;switch(r.ev_type){case"performance":var o=i.name;i.isSupport&&e(n[ta],o,i.value);break;case eO:e(n[ta],"action",i.duration||0);break;case eT:t(n[ti],0);break;case ex:if(i.response.is_custom_error||i.response.status>=400)t(n[ti],1);else{var a=i.response.timing;a&&e(n[to],0,a.duration)}break;case"resource_error":t(n[ti],2);break;case"blank_screen":t(n[ti],3);break;case"resource":e(n[to],1,i.duration);break;case"performance_longtask":i.longtasks.forEach(function(t){e(n[to],2,t.duration)})}}},td=function(){var e,t,r=function(){e=[0,0,0],t=ts()};return r(),[function(r,n,i){var o=r&&r[n];if(o&&!(i<=0)){var a=i<(o[0].threshold||0)?0:i>(o[1].threshold||0)?2:1;if(e[a]+=o[a].weight,"string"==typeof n){var s=te(n,a),u=t[ta][s];t[ta][s]=(u||0)+1}else 2===a&&(t.duration_count[n]+=1)}},function(r,n){r&&(e[2]+=r[n],t.error_count[n]+=1)},function(){return[e,t]},r]},tf=function(){var e={start:H(),end:0,time_spent:0,is_bounced:!1,entry:"",exit:"",p_count:0,a_count:0};return[function(t,r){var n=i(t,3),o=n[0],a=n[1],s=n[2];e.end=H(),e.time_spent+=r&&r.time_spent||0,e.last_page=r,e.p_count+=1,e.rank=o,e.apdex=a,e.apdex_detail=s;var u=W();u&&(e.is_bounced="complete"!==u.readyState)},function(t,r){e.time_spent+=t.time_spent,e.p_count+=1,e.exit=r},function(){e.a_count+=1},function(t){e.entry=t,e.exit=t},function(){return e}]},tp=function(e,t,r,n){var o,a,s=n.sendInit,u=n.initPid,c=n.routeMode,l=n.extractPid,d=n.onPidUpdate,f=tn(c)?function(){return""}:function(e){var t;return"hash"===c?(null==(t=V(e).hash)?void 0:t.replace(/^#/,""))||"/":V(e).path},p=l||function(){},v=i(tt(function(t,r){e({ev_type:eR,payload:{pid:r,source:t}})},u||(null!=(a=p(o=location.href))?a:f(o)),f(location.href),d),2),h=v[0],m=v[1];if(!tn(c)){var g=i(tr(function(e,t){return h(e,f(t),p(t))},""),1)[0];r.length&&r.forEach(function(e){return t.push(e[0](function(e){return g(c,e)}))})}return s&&m(),[h.bind(null,"user_set")]},tv=function(e,t,r,n){var o=i(r,2),a=o[0],s=o[1],u=2===n.apdex,c=void 0,l=void 0,d=void 0,f=!1,p=i(td(),4),v=p[0],h=p[1],m=p[2],g=p[3],_=i(td(),4),y=_[0],b=_[1],w=_[2],S=_[3],E=i(tf(),5),R=E[0],C=E[1],T=E[2],x=E[3],k=E[4],O=i(tc(),2),A=O[0],P=O[1];t.push(a[0](A)),u||t.push(s[0](function(){if(f){var t=i(w(),2),r=t[0],n=t[1];R([tu(r,d),r,n],M()),e({ev_type:eC,payload:k()}),S()}}));var j=tl(v,h),I=tl(y,b),M=function(){var e=i(m(),2),t=e[0],r=e[1];return{start:c[0],pid:c[1],view_id:c[2],end:H(),time_spent:P(),apdex:t,rank:tu(t,d),detail:r}};return t.push(function(){f=!1}),[function(e,t){if(!c){c=[H(),e,t],x(e),f=!!(d&&c);return}f&&C(l=M(),e),c=[H(),e,t],g()},function(e){f&&(u||(I(e,d),e.ev_type===eO&&T()),e.common.pid===c[1]&&j(e,d))},function(t){f&&(t.payload.last=l),e(t)},function(e){if(!e){t.forEach(function(e){return e()}),t.length=0;return}f=!!((d=e)&&c)}]},th="pageview",tm={sendInit:!0,routeMode:"history",apdex:2},tg=function(e){if(e&&l(e)&&e.name&&m(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&l(e.metrics)){var r=e.metrics,n={};for(var i in r)h(r[i])&&(n[i]=r[i]);t.metrics=n}if("categories"in e&&l(e.categories)){var o=e.categories,a={};for(var i in o)a[i]=w(o[i]);t.categories=a}return"attached_log"in e&&m(e.attached_log)&&(t.attached_log=e.attached_log),t}},t_=function(e){if(e&&l(e)&&e.content&&m(e.content)){var t={content:w(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&l(e.extra)){var r=e.extra,n={},i={};for(var o in r)h(r[o])?n[o]=r[o]:i[o]=w(r[o]);t.metrics=n,t.categories=i}return"attached_log"in e&&m(e.attached_log)&&(t.attached_log=e.attached_log),t}},ty=function(e){e.provide("sendEvent",function(t){var r=tg(t);r&&e.report({ev_type:ek,payload:r,extra:{timestamp:H()}})}),e.provide("sendLog",function(t){var r=t_(t);r&&e.report({ev_type:ek,payload:r,extra:{timestamp:H()}})})};function tb(e){return(null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||""}var tw=function(e){var t=function(){var e=function(){if(U()&&"navigator"in window)return window.navigator}();if(e)return e.connection||e.mozConnection||e.webkitConnection}(),r=tb(t);t&&(t.onchange=function(){r=tb(t)}),e.on("report",function(e){return n(n({},e),{extra:n(n({},e.extra||{}),{network_type:r})})})},tS=function(e,t){var r=e.common||{};return r.sample_rate=t,e.common=r,e},tE=function(e,t,r,n,i){var o;return e?(o=i(n,t),function(){return o}):function(){return r(t)}},tR=function(e,t,r){switch(r){case"eq":return g(t,e);case"neq":return!g(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return!!e.match(new RegExp(t.join("|")));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}},tC=function(e,t,r,n){var i=y(e,t,function(e,t){return e[t]});if(void 0===i)return!1;var o="boolean"==typeof i?"bool":h(i)?"number":"string";return tR(i,n.map(function(e){switch(o){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}),r)},tT=function(e,t){try{return"rule"===t.type?tC(e,t.field,t.op,t.values):"and"===t.type?t.children.every(function(t){return tT(e,t)}):t.children.some(function(t){return tT(e,t)})}catch(e){return Q(e),!1}},tx=function(e,t,r,n,i,o){var a={};return Object.keys(e).forEach(function(s){var u=e[s],c=u.enable,l=u.sample_rate,d=u.conditional_sample_rules;c?(a[s]={enable:c,sample_rate:l,effectiveSampleRate:l*r,hit:tE(t,l,n,i,o)},d&&(a[s].conditional_hit_rules=d.map(function(e){var a=e.sample_rate,s=e.filter;return{sample_rate:a,hit:tE(t,a,n,i,o),effectiveSampleRate:a*r,filter:s}}))):a[s]={enable:c,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}}),a},tk=function(e,t,r,n,i){if(!t)return c;var o=t.sample_rate,a=t.include_users,s=t.sample_granularity,u=t.rules,l=t.r,d=void 0===l?Math.random():l;if(g(a,e))return function(e){return tS(e,1)};var f="session"===s,p=tE(f,o,r,d,n),v=tx(u,f,o,r,d,n);return function(e){if(!p())return f&&i[0](),!1;if(!(e.ev_type in v))return tS(e,o);if(!v[e.ev_type].enable)return f&&i[1](e.ev_type),!1;if(null==(t=e.common)?void 0:t.sample_rate)return e;var t,r=v[e.ev_type],n=r.conditional_hit_rules;if(n){for(var a=0;a<n.length;a++)if(tT(e,n[a].filter)){if(n[a].hit())return tS(e,n[a].effectiveSampleRate);return!1}}return r.hit()?tS(e,r.effectiveSampleRate):(!(n&&n.length)&&f&&i[1](e.ev_type),!1)}},tO=function(e){e.on("start",function(){var t=e.config(),r=tk(t.userId,t.sample,O,A,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",r)})},tA=function(){var e=U();return e&&e.navigator.sendBeacon?{get:function(){},post:function(t,r){e.navigator.sendBeacon(t,r)}}:{get:u,post:u}},tP=function(e,t,r){var n=t.url,i=t.data,o=t.success,a=void 0===o?u:o,s=t.fail,c=void 0===s?u:s,l=t.getResponseText,d=void 0===l?u:l,f=t.withCredentials,p=new r;p.withCredentials=void 0!==f&&f,p.open(e,n,!0),p.setRequestHeader("Content-Type","application/json"),p.onload=function(){null==d||d(this.responseText);try{if(this.status>=400)c(Error(this.responseText||this.statusText));else if(this.responseText){var e=JSON.parse(this.responseText);a(e)}else a({})}catch(e){c(e)}},p.onerror=function(){c(Error("Network request failed"))},p.onabort=function(){c(Error("Network request aborted"))},p.send(i)},tj=function(){var e=function(){if("function"==typeof XMLHttpRequest&&v(XMLHttpRequest))return XMLHttpRequest}();return e?{useBeacon:!0,get:function(t){tP("GET",t,e)},post:function(t){tP("POST",t,e)}}:{get:u,post:u}},tI="1.14.1",tM="/monitor_web/settings/browser-settings",tL="/monitor_browser/collect/batch/",tD=["/log/sentry/",tL,tM],tN="session",tF=["blankScreen","action"],tq={sample_rate:1,include_users:[],sample_granularity:tN,rules:{}},tz=function(e,t,r,n){void 0===n&&(n=tH);var i=t.config(),o=i.plugins,a=i.pluginBundle,s=e.filter(function(e){return o[e]&&!t.destroyAgent.has(e)}),u=function(){return s.forEach(function(e){return tU(t,e,r)})};s.every(function(e){return tY(e,r)})?u():n(t,{name:a.name},u)},tB=function(e,t,r,n){void 0===n&&(n=tH);var i=t.config().plugins;e.filter(function(e){return i[e]&&!t.destroyAgent.has(e)}).forEach(function(e){tY(e,r)?tU(t,e,r):n(t,{name:e,config:i[e]},function(){return tU(t,e,r)})})};function tG(e,t,r){void 0===r&&(r=tH);var i=e.config().pluginBundle;tz(i?i.plugins:[],e,t,r),tB(tF,e,t,r),e.provide("reloadPlugin",function(t,r){var i,o=e.config().pluginBundle;e.destroyAgent.has(t)&&e.destroyAgent.remove(t),void 0!==r&&e.set({plugins:n(n({},e.config().plugins),((i={})[t]=r,i))}),o&&~o.plugins.indexOf(t)?tz([t],e):tB([t],e)})}function tH(e,t,r,n){var i,o,a,s,u=t.name,c=t.config;void 0===n&&(n=es),n((i=e,o=u,null!=(s=null==(a=c)?void 0:a.path)?s:i.config().pluginPathPrefix+"/"+o.replace(/([a-z])([A-Z])/g,function(e,t,r){return t+"-"+r.toLowerCase()})+"."+tI+".js"),function(){r()})}function tU(e,t,r){if(void 0===r&&(r=Z(U())),r){var n=tW(r,t);if(!n)return void k("[loader].applyPlugin not found",t);try{if(e.destroyAgent.has(t))return;n.apply(e)}catch(e){Q(e),k("[loader].applyPlugin failed",t,e)}}}function tW(e,t){return e.plugins.filter(function(e){return e.name===t&&e.version===tI})[0]}function tY(e,t){return void 0===t&&(t=Z(U())),!!t&&!!t.plugins&&!!tW(t,e)}function t$(e,t,r){void 0===r&&(r=Z(U())),r&&r.plugins&&(tW(r,e)||r.plugins.push({name:e,version:tI,apply:t}))}function tV(e){var t,r;try{for(var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(["userId","deviceId","sessionId","env"]),i=n.next();!i.done;i=n.next()){var o=i.value;e[o]||delete e[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e}function tK(e){var t=e.plugins||{};for(var r in t)t[r]&&!l(t[r])&&(t[r]={});return tV(n(n({},e),{plugins:t}))}function tX(e){return l(e)&&"bid"in e}function tJ(e){return tV(n({},e))}var tZ=function(e){var t=[];return e.observe=function(e){t.push(e)},e.push=function(){for(var r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return n.forEach(function(e){t.forEach(function(t){return t(e)})}),(r=[].push).call.apply(r,o([e],i(n),!1))},e},tQ=function(e){return"SLARDAR"+e},t0=function(e,t){try{var r=localStorage.getItem(e);if(!r||!ec()||"{"!==r[0])return;ed(e,JSON.parse(r),t)}catch(e){}},t1=function(e,t){void 0===e&&(e="");var r={userId:j(),deviceId:j()};if(t<=0)return r;var n=tQ(e);t0(n,t);var i=el(n);return{userId:(null==i?void 0:i.userId)||r.userId,deviceId:(null==i?void 0:i.deviceId)||r.deviceId}},t2=function(e){var t=e.bid,r=e.userId,n=e.deviceId,i=e.storageExpires;ed(tQ(t),{userId:r,deviceId:n},ef(i))},t4={get:function(){return this.__SLARDAR__REPALCE__HOLDER__}},t3=function(e){var t,r,i=e,o={},a=t4.get(),s=u,c=u;return{getConfig:function(){return i},setConfig:function(e){return o=n(n({},o),e||{}),d(),t||(t=e,i.useLocalConfig||!i.bid?(r={},s()):a?v():function(e,t,r,n){var i,o;e.get({withCredentials:!0,url:(i=t,void 0===o&&(o=tM),(i&&i.indexOf("//")>=0?"":"https://")+i+o+"?bid="+r+"&store=1"),success:function(e){n(e.data||{})},fail:function(){n({sample:{sample_rate:.001}})}})}(i.transport,i.domain,i.bid,function(e){a=e,v()})),i},onChange:function(e){c=e},onReady:function(e){s=function(){t2(i),e()},r&&s()}};function d(){var t=n(n(n({},e),r||{}),o);t.plugins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},i=0;i<e.length;)r=function e(t,r){var i=n({},t);for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&void 0!==r[o]&&(l(r[o])&&f(r[o])?i[o]=e(l(t[o])?t[o]:{},r[o]):p(r[o])&&p(t[o])?i[o]=function t(r,n){var i=p(r)?r:[],o=p(n)?n:[];return Array.prototype.concat.call(i,o).map(function(r){return r instanceof RegExp?r:l(r)&&f(r)?e({},r):p(r)?t([],r):r})}(t[o],r[o]):i[o]=r[o]);return i}(r,e[i++]);return r}(e.plugins,(null==r?void 0:r.plugins)||{},o.plugins||{}),t.sample=t6(t6(e.sample,null==r?void 0:r.sample),o.sample),i=t,c()}function v(){r=function(e){if(!e)return{};var t,r=e.sample,n=e.plugins,i=e.timestamp,o=e.quota_rate,a=e.apdex;if(!r)return{};var s=r.sample_rate,u=r.sample_granularity,c=r.include_users,l=r.rules;return{sample:{include_users:c,sample_rate:s*(void 0===o?1:o),sample_granularity:void 0===u?tN:u,rules:(void 0===l?[]:l).reduce(function(e,t){var r=t.name,n=t.enable,i=t.sample_rate,o=t.conditional_sample_rules;return e[r]={enable:n,sample_rate:i,conditional_sample_rules:o},e},{})},plugins:{heatmap:null!=(t=null==n?void 0:n.heatmap)&&t},apdex:a,serverTimestamp:i}}(a),d(),s()}};function t6(e,t){if(!e||!t)return e||t;var r=n(n({},e),t);return r.include_users=o(o([],i(e.include_users||[]),!1),i(t.include_users||[]),!1),r.rules=o(o([],i(Object.keys(e.rules||{})),!1),i(Object.keys(t.rules||{})),!1).reduce(function(r,a){var s,u;return a in r||(a in(e.rules||{})&&a in(t.rules||{})?(r[a]=n(n({},e.rules[a]),t.rules[a]),r[a].conditional_sample_rules=o(o([],i(e.rules[a].conditional_sample_rules||[]),!1),i(t.rules[a].conditional_sample_rules||[]),!1)):r[a]=(null==(s=e.rules)?void 0:s[a])||(null==(u=t.rules)?void 0:u[a])),r},{}),r}var t5={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:n(n({},e.extra||{}),e.overrides||{})}}},t8=function(e,t){var r=t||{},i=r.pid,o=r.viewId,a={url:K(),timestamp:H(),sdk_version:tI,sdk_name:"SDK_SLARDAR_WEB",pid:void 0===i?"":i,view_id:void 0===o?"":o};return n(n({},e),{extra:n(n({},a),e.extra||{})})},t7=function(e){e.on("report",function(t){return t8(t,e.config())})},t9={sri:"reportSri",st:"reportResourceError",err:"captureException",reject:"captureException"},re=function(e,t){return"err"===t?!1!==y(e,"plugins."+e4+".onerror",function(e,t){return e[t]}):"reject"!==t||!1!==y(e,"plugins."+e4+".onunhandledrejection",function(e,t){return e[t]})},rt=function(e,t){void 0===t&&(t=t9);var r,o,a,s,u,c,l,d,f=Object.keys(t).reduce(function(e,t){return e[t]=[],e},{}),p=Object.keys(s=t).reduce(function(e,t){return e[s[t]]?e[s[t]].push(t):e[s[t]]=[t],e},{}),v=(u=e,c=f,l=t,function(e,t,r,i){void 0===r&&(r=H()),void 0===i&&(i=location.href);var o,a=n(n({},ee(u)),{url:i,timestamp:r});c[e]&&(u[l[e]]?et(u,a)(function(){u[l[e]](t)}):null==(o=c[e])||o.push([t,a]))});(null==(d=e.p)?void 0:d.a)&&"observe"in e.p.a&&e.p.a.observe(function(t){var r=i(t,5);r[0];var n=r[1],o=r[2],a=r[3],s=r[4];re(e.config(),n)&&v(n,o,a,s)}),e.on("init",function(){var t,r=e.config();null==(t=e.p)||t.a.forEach(function(e){var t=i(e,5);t[0];var n=t[1],o=t[2],a=t[3],s=t[4];re(r,n)&&v(n,o,a,s)}),e.p&&e.p.a&&(e.p.a.length=0),e.provide("precollect",function(e,t,n,i){void 0===n&&(n=H()),void 0===i&&(i=location.href),re(r,e)&&v(e,t,n,i)})}),e.on("provide",(r=e,o=f,a=p,function(e){e in a&&a[e].forEach(function(t){var n;null==(n=o[t])||n.forEach(function(t){var n=i(t,2),o=n[0];et(r,n[1])(function(){r[e](o)})}),o[t]=null})}))},rr=function(e){var t=i(e,2),r=t[0],n=t[1];return{ev_type:eT,payload:{error:e2(r),breadcrumbs:[],extra:n||{}},extra:{bid:"slardar_sdk"}}},rn=function(e,t){void 0===t&&(t=.001);var r=Z(U());if(r)r.errors||(r.errors=[]),"observe"in r.errors||O(t)&&(r.errors=tZ(r.errors),r.errors.forEach(function(t){e.report(rr(t))}),r.errors.observe(function(t){e.report(rr(t))}))},ri=function(e){var t,r=!1;e.on("init",function(){t=new Date().getTime(),e.on("config",function(){var i,o=null==(i=e.config())?void 0:i.serverTimestamp;if(!(isNaN(o)||0>=Number(o))&&!r){r=!0;var a=new Date().getTime();if(a-t<700&&o){var s=o-(a+t)/2;!isNaN(s)&&(s>0||s<-6e5)&&e.on("beforeBuild",function(e){var t;return n(n({},e),{extra:n(n({},null!=(t=e.extra)?t:{}),{sdk_offset:null!=s?s:0})})})}}})})},ro=function(e,t){var r={};return r.bid=t.bid,r.user_id=t.userId,r.device_id=t.deviceId,r.session_id=t.sessionId,r.release=t.release,r.env=t.env,n(n({},e),{extra:n(n({},r),e.extra||{})})},ra=function(e){e.on("beforeBuild",function(t){return ro(t,e.config())})},rs=function(e){e.on("start",function(){var t=e.config().bid,r=e.getSender();r.setEndpoint(r.getEndpoint()+"?biz_id="+t)})},ru=function(e){var t=ef(e.storageExpires),r=t1(e.bid,t);return{bid:"",pid:"",viewId:e9("_"),userId:r.userId,deviceId:r.deviceId,storageExpires:t,sessionId:j(),domain:"mon-va.byteoversea.com",pluginBundle:{name:"commonMonitors",plugins:["breadcrumb","jsError","performance","resourceError","resource"]},pluginPathPrefix:"https://sf16-short-sg.bytedapm.com/slardar/fe/sdk-web/plugins",plugins:{ajax:{ignoreUrls:tD},fetch:{ignoreUrls:tD},breadcrumb:{},pageview:{},jsError:{},resource:{},resourceError:{},performance:{},tti:{},fmp:{},blankScreen:!1,heatmap:!1},release:"",env:"production",sample:tq,transport:tj()}},rc=function(e){var t,r,n=void 0===e?{}:e,u=n.createSender,c=void 0===u?function(e){var t,r,n,i,o;return n=(r=function(e){var t,r=e.transport,n=e.endpoint,i=e.size,o=void 0===i?10:i,s=e.wait,u=void 0===s?1e3:s,c=[],l=0;function d(){if(c.length){var e=this.getBatchData();r.post({url:n,data:e,fail:function(r){t&&t(r,e)}}),c=[]}}return{getSize:function(){return o},getWait:function(){return u},setSize:function(e){o=e},setWait:function(e){u=e},getEndpoint:function(){return n},setEndpoint:function(e){n=e},send:function(e){c.push(e),c.length>=o&&d.call(this),clearTimeout(l),l=setTimeout(d.bind(this),u)},flush:function(){clearTimeout(l),d.call(this)},getBatchData:function(){return c.length?a(c):""},clear:function(){clearTimeout(l),c=[]},fail:function(e){t=e}}}(t={size:20,endpoint:(i=e.domain,void 0===o&&(o=tL),(i&&i.indexOf("//")>=0?"":"https://")+i+o),transport:e.transport})).send,eo(function(){if(t.transport.useBeacon){var e=tA(),i=r.getBatchData();i&&(e.post(r.getEndpoint(),i),r.clear()),r.send=function(t){e.post(r.getEndpoint(),a([t]))},ea(function(){r.send=n})}else r.flush()}),r}:u,d=n.builder,f=n.createDefaultConfig,p=function(e){var t,r,n,a,u,c,d=e.builder,f=e.createSender,p=e.createDefaultConfig,v=e.createConfigManager,h=e.userConfigNormalizer,m=e.initConfigNormalizer,y=e.validateInitConfig,b={};s.forEach(function(e){return b[e]=[]});var w=!1,S=!1,E=!1,R=[],C=[],T=(t=!1,r={},n=function(e){e.length&&e.forEach(function(e){try{e()}catch(e){}}),e.length=0},{set:function(e,i,o){r[e]?r[e].push([i,o]):r[e]=[[i,o]],t&&n(o)},has:function(e){return!!r[e]},remove:a=function(e){r[e]&&r[e].forEach(function(e){n(e[1])}),r[e]=void 0},removeByEvType:function(e){Object.keys(r).forEach(function(t){r[t]&&r[t].forEach(function(t){t[0]===e&&n(t[1])})})},clear:function(){t=!0,Object.keys(r).forEach(function(e){a(e)})}}),x={getBuilder:function(){return d},getSender:function(){return u},getPreStartQueue:function(){return R},init:function(e){if(w)return void k("already inited");if(e&&l(e)&&y(e)){var t=p(e);if(!t)throw Error("defaultConfig missing");var r=m(e);if((c=v(t)).setConfig(r),c.onChange(function(){O("config")}),!(u=f(c.getConfig())))throw Error("sender missing");w=!0,O("init",!0)}else throw Error("invalid InitConfig, init failed")},set:function(e){w&&e&&l(e)&&(O("beforeConfig",!1,e),null==c||c.setConfig(e))},config:function(e){if(w)return e&&l(e)&&(O("beforeConfig",!1,e),null==c||c.setConfig(h(e))),null==c?void 0:c.getConfig()},provide:function(e,t){if(g(C,e))return void k("cannot provide "+e+", reserved");x[e]=t,O("provide",!1,e)},start:function(){var e=this;w&&(S||null==c||c.onReady(function(){S=!0,O("start",!0),R.forEach(function(t){return e.build(t)}),R.length=0}))},report:function(e){if(e){var t=P(b.beforeReport)(e);if(t){var r=P(b.report)(t);r&&(S?this.build(r):R.push(r))}}},build:function(e){if(!S)return;var t=P(b.beforeBuild)(e);if(t){var r=d.build(t);if(r){var n=P(b.build)(r);n&&this.send(n)}}},send:function(e){if(S){var t=P(b.beforeSend)(e);t&&(u.send(t),O("send",!1,t))}},destroy:function(){T.clear(),E=!0,R.length=0,O("beforeDestroy",!0)},on:function(e,t){if("init"===e&&w||"start"===e&&S||"beforeDestroy"===e&&E)try{t()}catch(e){}else b[e]&&b[e].push(t)},off:function(e,t){b[e]&&(b[e]=_(b[e],t))},destroyAgent:T};return C=Object.keys(x),x;function O(e,t){void 0===t&&(t=!1);for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];b[e].forEach(function(e){try{e.apply(void 0,o([],i(r),!1))}catch(e){}}),t&&(b[e].length=0)}}({validateInitConfig:tX,initConfigNormalizer:tK,userConfigNormalizer:tJ,createSender:c,builder:void 0===d?t5:d,createDefaultConfig:void 0===f?ru:f,createConfigManager:t3});rn(p),q(p);var v=Z(U());t=v&&v.subject||{},r={},p.provide("setFilter",function(e,t){r[e]||(r[e]=[]),r[e].push(t)}),p.provide("initSubject",function(e){var n=i(e,2),o=n[0],a=n[1],s=o.split("_")[0],u=!!s&&r[s];return(t[o]||(t[o]=D(a,function(){t[o]=void 0})),u)?G(p,[o,N(t[o],u)]):t[o]}),p.provide("getSubject",function(e){return t[e]}),p.provide("privateSubject",{}),ri(p),ra(p),t7(p),tw(p),rs(p);var h=z(p,ee,function(e,t,r){return et(e,t)(function(){var e=i(r),t=e[0],n=e.slice(1);p[t].apply(p,o([],i(n),!1))})});return h.on("init",function(){var e=[],t=function(t){t.forEach(function(t){var r=t.name;g(e,r)||(e.push(r),t.setup(h),t$&&t$(r,t.setup),h.destroyAgent.set(r,r,[function(){e=_(e,r),t.tearDown&&t.tearDown()}]))})};h.provide("applyIntegrations",t);var r=h.config();r&&r.integrations&&t(r.integrations)}),h},rl=((r={})[th]=function(e){e.on("init",function(){var t,r=null==(t=e.config())?void 0:t.plugins[th];!function(e,t){var r,o=eu(t,tm);if(o&&Y()){var a=o.routeMode,s=o.apdex,c=e.report.bind(e),l=u;if(s){var d=[],f=i(tv(e.report.bind(e),d,[B(e,e6),B(e,e5)],o),4),p=f[0],v=f[1],h=f[2],m=f[3];c=h,l=p,e.on("send",v),d.push(function(){return e.off("send",v)}),e.on("start",function(){m(e.config().apdex)}),F(e,th,eC,d)}var g=[],_=i(tp(c,g,tn(a)?[]:[e.initSubject(e8),e.initSubject(e7)],n(n({},o),{initPid:null==(r=e.config())?void 0:r.pid,onPidUpdate:function(t){var r=e9(t);l(t,r),e.set({pid:t,viewId:r,actionId:void 0})}})),1)[0];G(e,["f_view_0",function(t,r){var n=X(e);r(u,function(e){n&&e(n)})}],-1);var y=function(){_(e.config().pid)};e.on("config",y),g.push(function(){return e.off("config",y)}),F(e,th,eR,g),e.provide("sendPageview",_)}}(e,r)})},r[ez]=function(e){e.on("init",function(){var t,r=null==(t=e.config())?void 0:t.plugins[ez],i=eu(r,eB);if(i){var o=[],a=n(n({},i),{setContextAtReq:function(){return J(e,!0)},setTraceHeader:ej(i.trace)}),s=function(){return B(e,eE)};a.autoWrap&&eF(o,[B(e,["xhr_0",eg(XMLHttpRequest&&XMLHttpRequest.prototype)]),s],a),F(e,ez,ex,o),e.provide("wrapXhr",function(e){function t(){var t=new e;return eF(o,[D(eg(t)),s],a),t}return t.prototype=new e,["DONE","HEADERS_RECIEVED","LOADING","OPENED","UNSENT"].forEach(function(r){t[r]=e[r]}),t})}})},r[eX]=function(e){e.on("init",function(){var t,r=null==(t=e.config())?void 0:t.plugins[eX],i=eu(r,eJ);if(i){var o=[],a=n(n({},i),{setContextAtReq:function(){return J(e,!0)},setTraceHeader:ej(i.trace)}),s=function(){return B(e,eE)};a.autoWrap&&eG(o,[B(e,ey),s],a),F(e,eX,ex,o),e.provide("wrapFetch",function(e){var t=void 0;return eG(o,[D(function(r){t=e_(e,r)}),s],a),t})}})},r),rd=function(e){void 0===e&&(e={});var t,r,n=rc(e);return tO(n),rt(n),ty(n),Object.keys(rl).forEach(function(e){t$(e,rl[e]),rl[e](n)}),t=n,void 0===r&&(r=tG),function(e){var t=U(),r=W();if(t&&r){if("complete"===r.readyState)return e();er(t,"load",function(){setTimeout(function(){e()},0)},!1)}}(function(){t.on("init",function(){r(t,void 0)})}),n.provide("create",rd),n},rf="precollect",rp=rd(),rv=U();rv&&function(e,t){if("addEventListener"in e){t.pcErr=function(r){var n=(r=r||e.event).target||r.srcElement||{};n instanceof Element||n instanceof HTMLElement?t(rf,"st",{tagName:n.tagName,url:n.getAttribute("href")||n.getAttribute("src")}):t(rf,"err",r.error)},t.pcRej=function(r){t(rf,"reject",(r=r||e.event).reason||r.detail&&r.detail.reason)};var r=[];r.push(er(e,"error",t.pcErr,!0)),r.push(er(e,"unhandledrejection",t.pcRej,!0)),setTimeout(function(){r.forEach(function(e){return e()})},3e5)}"PerformanceObserver"in e&&"PerformanceLongTaskTiming"in e&&(t.pp={entries:[]},t.pp.observer=new PerformanceObserver(function(e){t.pp.entries=t.pp.entries.concat(e.getEntries())}),t.pp.observer.observe({entryTypes:["longtask"]}),setTimeout(function(){t.pp.observer.disconnect()},3e5))}(rv,rp),t.createBrowserClient=rd},3452:function(e){e.exports=function(){"use strict";var e="0.2.2",t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,r,n){return new(r=r||Promise)(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})}function n(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var u=[a,s];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function s(){return{}}function u(e){return"object"==typeof e&&null!==e}var c=Object.prototype;function l(e){return"function"==typeof e}function d(e,t,r){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!e)return s;var u=e[t],c=r.apply(void 0,a([u],o(n),!1)),d=c;return l(d)&&(d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(this,e)}),e[t]=d,function(){d===e[t]?e[t]=u:c=u}}}var f=0;function p(){if("object"==typeof window&&u(window))return window}function v(){if("object"==typeof document&&u(document))return document}var h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar}(p());r&&(r.errors||(r.errors=[]),r.errors.push(e))},m=function(e,t){var r=e&&new e(t);return[function(e,t){r&&e&&r.observe(e,t)},function(){return r&&r.disconnect()}]},g=function(e){var t=e&&e.timing||void 0;return[t,function(){return e&&e.now?e.now():(Date.now?Date.now():+new Date)-(t&&t.navigationStart||0)},function(t){var r=(e||{}).getEntriesByType;return l(r)&&r.call(e,t)||[]},function(){var t=(e||{}).clearResourceTimings;l(t)&&t.call(e)},function(t){var r=(e||{}).getEntriesByName;return l(r)&&r.call(e,t)||[]}]},_=function(e,t,r,n){var i=e&&new e(function(e,i){e.getEntries?e.getEntries().forEach(function(e,r,n){return t(e,r,n,i)}):n&&n(),r&&i.disconnect()});return[function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!e||!i)return n&&n();try{t.forEach(function(t){-1<e.supportedEntryTypes.indexOf(t)&&i.observe({type:t,buffered:!1})})}catch(e){try{i.observe({entryTypes:t})}catch(e){return n&&n()}}},function(){return i&&i.disconnect()}]},y=(b.prototype.subscribe=function(e){this.observers.push(e)},b.prototype.unsubscribe=function(e){this.observers.filter(function(t){return t!==e})},b.prototype.notify=function(e){this.observers.forEach(function(t){t(e)})},b);function b(){this.observers=[]}function w(e){this.cache=new Map,this.capacity=10,this.capacity=e}function S(e){var t=[];return Array.from(e).forEach(function(e){e instanceof Element&&("img"===e.nodeName.toLocaleLowerCase()?t.push(e):null!=e&&e.querySelectorAll&&(e=e.querySelectorAll("img"),t=t.concat(Array.from(e))))}),t}w.prototype.get=function(e){var t;return this.cache.has(e)?(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t),t):null},w.prototype.put=function(e,t){this.cache.has(e)?this.cache.delete(e):this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)};var E=function(e){var t=[],r=[];return(e=void 0===e?[]:e).forEach(function(e){t.push.apply(t,a([],o(S(e.addedNodes)),!1)),r.push.apply(r,a([],o(S(e.removedNodes)),!1))}),[t,r]},R="undefined"!=typeof IntersectionObserver,C=(T.prototype.set=function(e){var t;R&&null!=(t=this.intersectionObserver)&&t.observe(e),this.record.set(e,{visible:!1,observer:this.intersectionObserver})},T.prototype.del=function(e){var t;null!=(t=this.record.get(e))&&t.visible||!R||null!=(t=this.intersectionObserver)&&t.unobserve(e),this.record.delete(e)},T.prototype.find=function(e){var r,n,a=null;try{for(var s=i(this.record),u=s.next();!u.done;u=s.next()){var c=o(u.value,2),l=c[0],d=c[1];if(l.currentSrc===e){a=t({target:l},d);break}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},T);function T(){var e=this;this.record=new Map,this.intersectionObserver=null,R&&(this.intersectionObserver=new IntersectionObserver(function(r){r.forEach(function(r){var n;(r.isIntersecting||0<r.intersectionRatio)&&((n=e.record.get(r.target))&&e.record.set(r.target,t(t({},n),{visible:!0})),null!=(n=e.intersectionObserver)&&n.unobserve(r.target))})},{rootMargin:"200px"}))}function x(e,t,r){var n=1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u=e.apply(void 0,a([],o(i),!1)),c=n+=2;return t(c,"string"==typeof i[0]?i[0]:i[0].url),u.then(function(){r(c)},function(){r(c)}),u}}function k(e,t,r){var n=0;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=n+=2;return t(a,this._url),d(this,"onreadystatechange",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 4===this.readyState&&r(a),e&&e.apply(this,t)}})(),e.apply(this,i)}}function O(s,d,f,h,y,b,S){if(void 0===s&&(s=p()),void 0===d&&(d=v()),void 0===f&&(f=p()&&window.location),void 0===h&&(h=function(){if("function"==typeof XMLHttpRequest&&l(XMLHttpRequest))return XMLHttpRequest}()),void 0===y&&(y=function(){if(p()&&u(window.performance))return window.performance}()),void 0===b&&(b=function(){if(p()&&l(window.MutationObserver))return window.MutationObserver}()),void 0===S&&(S=function(){if(p()&&l(window.PerformanceObserver))return window.PerformanceObserver}()),d&&s&&f)return function(u,l){var f=u.debug,R=u.sample_rate,T=void 0===R?F:R,R=u.ignoreUrls,x=void 0===R?[]:R,k=(H=void 0!==(H=f)&&H)?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,a(["[".concat("imageReport","] ")],o(e),!1))}:function(){};function O(e){k("\u56FE\u7247\u8D44\u6E90\u4E0A\u62A5",e),l&&l({ev_type:N,payload:e})}k("\u56FE\u7247\u63D2\u4EF6\u5DF2\u6CE8\u518C\uFF0Cversion:",e);var H,U,W=o(g(y),2)[1],Y=new C,$=new w(10),u=o(A(),3),V=u[0],K=u[1],X=u[2],J=o(P(s,h,function(e){return k("before http \u8BF7\u6C42, url:",e),!0},function(e){k("after http \u8BF7\u6C42, url:",e=J.get(e)),e&&J.size-1<z&&B.notify({ev_type:L,payload:{url:e,remainConnections:z-(J.size-1)}})}),1)[0],R=o(m(b,function(e){var e=o(E(e),2),t=e[0],e=e[1];(t.length||e.length)&&k("\u76D1\u542C\u5230DOM\u53D8\u66F4",t,e),t.forEach(function(e){return Y.set(e)}),e.forEach(function(e){return Y.del(e)})}),2),f=R[0],Z=R[1],u=(f(d,{childList:!0,subtree:!0,characterData:!1,attributes:!1}),o(_(S,function(e){var r,n,i,o,a,s,u,l,d,f,p,v,h,m,g,_,y;"img"!==e.initiatorType&&"css"!==e.initiatorType||null!=(g=function(e){if("[object Array]"!==c.toString.call(e))return null;if(e.length){for(var t=[],r=e.length,n=0;n<r;n++){var i=e[n];"string"==typeof i?t.push(i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):i&&i.source&&t.push(i.source)}return RegExp(t.join("|"),"i")}return null}(x))&&g.test(e.name)||(k("\u76D1\u542C\u5230resource",e),y=(g=e.toJSON()).name,_=g.initiatorType,r=g.transferSize,n=g.duration,i=g.encodedBodySize,o=g.decodedBodySize,a=g.redirectStart,s=g.redirectEnd,u=g.serverTiming,l=g.domainLookupStart,d=g.domainLookupEnd,f=g.connectStart,p=g.connectEnd,v=g.secureConnectionStart,h=g.requestStart,m=g.responseStart,g=g.responseEnd,"img"===(_={name:y,source:_,dpr:Math.round(null!=(y=null==window?void 0:window.devicePixelRatio)?y:1),needCompress:!1,needSizeOptim:!1,needFormatOptim:!1,hitLocalCache:0===r||void 0===r&&0===n,hitCdnCache:0<=(u||[]).findIndex(function(e){return"cdn-cache"===e.name&&0<=e.description.toLocaleLowerCase().indexOf("hit")}),size:0!==o?i:0,duration:n,redirect:s-a,dns:d-l,tcp:p-f,ssl:void 0===v||v<=0?0:p-v,request:void 0===h||h<=0?0:m-h,download:void 0===m||m<=0?0:g-m,timingDetail:e.toJSON()}).source&&(k("\u5339\u914D\u5230img",y=Y.find(e.name),Y.record),y&&(_=t(t({},_),{isLazyLoad:!!y.visible,width:(null==(r=y.target)?void 0:r.naturalWidth)||0,height:(null==(u=y.target)?void 0:u.naturalHeight)||0,viewerWidth:null==(o=y.target)?void 0:o.width,viewerHeight:null==(i=y.target)?void 0:i.height}))),B.notify({ev_type:M,payload:_}))}),2)),R=u[0],Q=u[1],ee=function(e,i){return r(void 0,void 0,void 0,function(){var r,o,a,s;return n(this,function(n){switch(n.label){case 0:return(r=$.get(e))?(k("\u547D\u4E2D\u7F13\u5B58header",e,r),[3,3]):[3,1];case 1:return[4,j(e)];case 2:r=n.sent(),$.put(e,r),n.label=3;case 3:if(s=(o=r||{}).format,a=o.status,o=o.contentLength,k("response header\uFF1A",s,a),"css"===i.source){if(null==s||!s.startsWith("image/"))return X(e),[2]}else if((null==s||!s.startsWith("image/"))&&400>Number(a))return X(e),[2];return!Number((s=t(t({},i||{}),{format:s&&String(s).startsWith("image/")&&null!=(s=s.split(/[,;]/)[0])?s.slice(6):void 0,status:a})).size)&&400>Number(a)&&0<Number(o)&&(s.size=Number(o)),a=I(s),O(t(t({},s),a)),X(e),[2]}})})};return B.subscribe(function(e){var a,s,u,c,l;if(e.ev_type===M){var d,f=W()-(null==(f=null==(f=e.payload)?void 0:f.timingDetail)?void 0:f.responseEnd);if(k("\u8D44\u6E90\u52A0\u8F7D\u4E8B\u4EF6: ",e.payload.name),k("\u8D44\u6E90\u5B8C\u6210\u52A0\u8F7D\u65F6\u95F4: ",null==(l=null==(l=e.payload)?void 0:l.timingDetail)?void 0:l.responseEnd),k("\u65F6\u95F4\u95F4\u9694: ",f),k("\u662F\u5426\u547D\u4E2D\u672C\u5730\u7F13\u5B58: ",null==(l=e.payload)?void 0:l.hitLocalCache),!(Math.random()<Number(T)))return;if(!G)return void K(e.payload.name,t({},e.payload));d=e.payload,r(void 0,void 0,void 0,function(){var e,r,i,o;return n(this,function(n){switch(n.label){case 0:return(k("\u8FDB\u884C\u4E2D\u7684\u8BF7\u6C42\u6570\uFF1A".concat(J.size)),0<z-J.size)?(e=$.get(d.name))?(k("\u547D\u4E2D\u7F13\u5B58header",d.name,e),[3,3]):[3,1]:[3,4];case 1:return[4,j(d.name)];case 2:e=n.sent(),$.put(d.name,e),n.label=3;case 3:if(o=(r=e||{}).format,i=r.status,r=r.contentLength,k("response header\uFF1A",o,i),"css"===d.source){if(null==o||!o.startsWith("image/"))return[2]}else if((null==o||!o.startsWith("image/"))&&400>Number(i))return[2];return!Number((o=t(t({},d),{format:o&&String(o).startsWith("image/")&&null!=(o=o.split(/[,;]/)[0])?o.slice(6):void 0,status:i})).size)&&400>Number(i)&&0<Number(r)&&(o.size=Number(r)),i=I(o),O(t(t({},o),i)),[3,5];case 4:K(d.name,t({},d)),n.label=5;case 5:return[2]}})})}if(e.ev_type===L&&G){if(k("http\u8BF7\u6C42\u5B8C\u6210\u4E8B\u4EF6"),e.payload.remainConnections<=0)return;try{for(var p=i(V),v=p.next();!v.done;v=p.next()){var h=o(v.value,2),m=h[0];if(null==(w=h[1])||!w.__lock){K(m,t(t({},w),{__lock:!0})),ee(m,w);break}}}catch(e){a={error:e}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}if(e.ev_type===D&&e.payload.pageLoad){k("pageload \u4E8B\u4EF6");try{for(var g=i(V),_=g.next();!_.done;_=g.next()){var y=o(_.value,2),b=y[0],w=y[1];if(!(0<z-J.size))break;null!=w&&w.__lock||(K(b,t(t({},w),{__lock:!0})),ee(b,w))}}catch(e){u={error:e}}finally{try{_&&!_.done&&(c=g.return)&&c.call(g)}finally{if(u)throw u.error}}G=!0}}),R(q),U=function(){B.notify({ev_type:D,payload:{pageLoad:!0}})},f=p(),u=v(),f&&u&&("complete"===u.readyState?U():f.addEventListener("load",function(){setTimeout(function(){U()},0)},!1)),[function(){k("\u63D2\u4EF6\u9500\u6BC1"),Z(),Q()}]}}var A=function(){var e=new Map;return[e,function(t,r){return e.set(t,r)},function(t){return e.delete(t)}]},P=function(e,t,r,n){function i(e,t){r&&r(t)&&c(e,t)}function a(e){n&&n(e),l(e)}var s=o(A(),3),u=s[0],c=s[1],l=s[2];return t&&d(t.prototype,"send",k)(i,a),e&&d(e,"fetch",x)(i,a),[u]},j=function(e){return r(void 0,void 0,void 0,function(){var t,r;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,fetch(e,{cache:"force-cache"})];case 1:return r=(t=n.sent()).headers,[2,{status:t.status,format:r.get("content-type")||"",contentLength:Number(r.get("content-length"))||0}];case 2:return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,a(["[SDK]",Date.now(),(""+f++).padStart(8," ")],o(e),!1))}("\u83B7\u53D6header\u5931\u8D25",n.sent()),[2,null];case 3:return[2]}})})},I=function(e){var r={needCompress:!1,needSizeOptim:!1,needFormatOptim:!1};if(!e.size)return r;o=(d=e).width,c=d.height,a=void 0===(a=d.format)?"":a,d=d.size,i=navigator&&navigator.userAgent.toLocaleLowerCase().includes("chrome"),l={},/(jpeg|png|bmp)/.test(a)&&(o&&c?(n=Math.round(Math.max(d-o*c*.2,0)),i?(o=Math.round(Math.max(d-o*c/6,0)),l.needFormatOptim=0<o,l.needFormatOptim&&(l.webpSavings=n,l.avifSavings=o)):(l.needFormatOptim=0<n,l.needFormatOptim&&(l.webpSavings=n))):(l.needFormatOptim=!0,l.webpSavings=Math.round(/png/.test(a)?.26*d:.3*d),i&&(l.avifSavings=Math.round(/png/.test(a)?.408*d:.44*d)))),/gif/.test(a)&&(l.needFormatOptim=!0,l.webpSavings=.65*d,i&&(l.avifSavings=.65*d));var n,i,o,a,s,u,c=l,l=(n=(o=e).width,a=o.height,i=void 0===(i=o.format)?"":i,o=o.size,d={},n&&a&&(/(jpeg|bmp)/.test(i)&&(s=o-n*a*.25,d.needCompress=0<s,d.needCompress&&(d.compressSavings=Math.round(s))),/png/.test(i)&&(s=o-n*a*.24,d.needCompress=0<s,d.needCompress&&(d.compressSavings=Math.round(s)))),d),d=(o=(i=e).width,a=e.height,s=e.viewerWidth,d=e.viewerHeight,u=e.dpr,i=e.size,e={},o&&a&&s&&d&&(e.needSizeOptim=0<(s=1-s*d*u*u/(o*a)),e.needSizeOptim&&(e.resizeSavings=Math.round((1-s)*i))),e);return t(t(t(t({},r),c),l),d)},M="image_resource",L="http_custom",D="pageload",N="image",F=.1,q="resource",z=8,B=new y,G=!1,H={sample_rate:F};return{version:e,imageReport:function(e){return void 0===e&&(e=H),{name:"imageReport",setup:function(t){t.on("init",function(){var r=o(function(e,t,r,n){void 0===t&&(t={}),void 0===n&&(n=[]);try{var i=e.apply(void 0,a([],o(n),!1));return i&&i(t,r)||[]}catch(e){return h(e),[]}}(O,e,t.report.bind(t)),1)[0];t.on("beforeDestroy",function(){r()})})}}}}}()},1948:function(e,t,r){"use strict";r.d(t,{bK:function(){return a},OF:function(){return o},cg:function(){return s}});var n=r(36154);let i={start:0,end:0};function o(){i.start=Date.now()}function a(){i.end=Date.now()}function s(e){let{vmok:t}=e.getState(),r={};if(r.registerDuration=i.end-i.start,r.navigationStartTime=(0,n.TW)(),window.TTAP_DOMPARSE_STARTTIME&&(r.domParseStart=window.TTAP_DOMPARSE_STARTTIME-r.navigationStartTime),window.TTAP_APPPARSE_STARTTIME&&(r.appParseStart=window.TTAP_APPPARSE_STARTTIME-r.navigationStartTime),t){let e=t.name,i=(0,n.tt)(e,"afterResolve"),o=(0,n.tt)(e,"onLoad");i&&o&&(r.vmokReadyToLoad=i-r.navigationStartTime,r.vmokLoaded=o-r.navigationStartTime)}let o={},a="2.0.0";a&&(o.version=a),e.callClient("sendEvent",{name:"ttapplugin_info",metrics:r,categories:o})}},14951:function(e,t,r){"use strict";r.d(t,{B:function(){return o},m:function(){return i}});let n={actualFmp:{},afterVmokResolve:{},onVmokLoad:{}};function i(e,t){n[e]&&"object"==typeof n[e]&&Object.keys(n[e]).forEach(r=>{n[e][r](t)})}function o(e,t){let r=`sub_${e}_${Date.now()}_${Math.floor(1e4*Math.random())}`;return n[e]&&"object"==typeof n[e]?(n[e][r]=t,{unsubscribe:()=>{delete n[e][r]}}):{unsubscribe:()=>{}}}},36154:function(e,t,r){"use strict";function n(e){return new Promise(t=>setTimeout(t,e))}function i(){return/(iPhone|iPad|iPod)/i.test(window.navigator.userAgent)}function o(){var e;return(null==(e=null==performance?void 0:performance.timing)?void 0:e.navigationStart)||(null==performance?void 0:performance.timeOrigin)}function a(){var e;let t=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation")[0];if(t&&(e=t).responseStart>0&&e.responseStart<window.performance.now())return t}r.d(t,{RD:function(){return u},Rd:function(){return a},TW:function(){return o},cY:function(){return s},tt:function(){return c},un:function(){return i},yy:function(){return n}});class s{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this.isResolved||this.isRejected||(this._resolve(e),this.resolvedValue=e,this.isResolved=!0)}reject(e){this.isResolved||this.isRejected||(this._reject(e),this.error=e,this.isRejected=!0)}reset(){this.resolvedValue=void 0,this.isResolved=!1,this.promise=new Promise(e=>{this._resolve=e})}}function u(){var e,t,r;return!!((null==(e=window.performance)?void 0:e.now)&&(null==(t=window.performance)?void 0:t.mark)&&(null==(r=window.performance)?void 0:r.measure))}function c(e,t){var r,n;return"undefined"!=typeof window&&(null==(n=null==(r=window.__VOM_GLOBAL_TIMING_STORE_KEY)?void 0:r[e])?void 0:n[t])||0}},34646:function(e,t,r){"use strict";r.d(t,{L:function(){return s},c:function(){return c}});var n=r(1948),i=r(14951),o=r(36154);let a=new Map,s=()=>{let e=(e,t)=>{var r;let{isSpaRouteCheck:n}=e.getState(),i=(0,o.TW)(),s={duration:(0,o.tt)(t,"onLoad")-(0,o.tt)(t,"afterResolve")};n||(s.vmokReadyToLoad=(0,o.tt)(t,"afterResolve")-i,s.vmokLoaded=(0,o.tt)(t,"onLoad")-i),console.debug("ttap_vmok_load",t,s),e.callClient("sendEvent",{name:"ttap_vmok_load",metrics:s,categories:{vmok_name:t,vmok_version:null!=(r=a.get(t))?r:"unknown"}})};return t=>({setRegisterStart:n.OF,setRegisterEnd:n.bK,preRegister:async()=>{t.getState().vmok||(0,i.B)("onVmokLoad",r=>{e(t,r)})},postRegister:()=>{try{let{isSpaRouteCheck:r,vmok:i}=t.getState();r||(0,n.cg)(t),i&&e(t,i.name)}catch{}},getFirstScreenRequests:()=>(e=>{var t,r;try{let{ignoreApiUrl:n=[],includeApiUrl:i=[]}=null!=(r=null==(t=null==e?void 0:e.getState)?void 0:t.call(e))?r:{},a=performance.getEntriesByType("resource").filter(e=>("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)&&(!n.length&&!i.length||(i.length?i.some(t=>"string"==typeof t?e.name.includes(t):t.test(e.name)):!n.some(t=>"string"==typeof t?e.name.includes(t):t.test(e.name))))),s=(0,o.TW)();return a.map(e=>({startTime:e.startTime+s,endTime:e.startTime+e.duration+s}))}catch(r){let e=performance.getEntriesByType("resource").filter(e=>"xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType),t=(0,o.TW)();return e.map(e=>({startTime:e.startTime+t,endTime:e.startTime+e.duration+t}))}})(t),getState:()=>({type:"webapp"})})};function u(e,t,r){try{if(!window.__VOM_GLOBAL_TIMING_STORE_KEY)return;window.__VOM_GLOBAL_TIMING_STORE_KEY[e]={...window.__VOM_GLOBAL_TIMING_STORE_KEY[e],[t]:r};return}catch{console.error("set vmok timing failed")}}let c=()=>("undefined"==typeof window||window.__VOM_GLOBAL_TIMING_STORE_KEY||(window.__VOM_GLOBAL_TIMING_STORE_KEY={}),{name:"mark-hook-timing-plugin",afterResolve(e){var t;let{remote:r,remoteInfo:n}=e;return a.set(r.name,null!=(t=n.buildVersion)?t:"unknown"),u(r.name,"afterResolve",Date.now()),(0,i.m)("afterVmokResolve",r.name),e},onLoad(e){let{remote:t}=e;return u(t.name,"onLoad",Date.now()),(0,i.m)("onVmokLoad",t.name),e}})},88062:function(e,t,r){"use strict";r.d(t,{Qn:function(){return n},tz:function(){return i}});let n={row:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/browser.sg.js",eu:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/browser.sg.js",us:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk-web/browser.oci.js"},i={row:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/plugins",eu:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk-web/plugins",us:"https://lf16-cdn-tos.tiktokcdn-us.com/obj/static-tx/slardar/fe/sdk-web/plugins"}},88758:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(7e4);let i={},o=()=>{};class a{create(e){let t=new a(e),r=this._instance.create(t._prefix);return t._inject(r),t._setConfigInjector(this._configInjector),t._callSyncHook(this._plugins,{prefix:e},n.$.OnCreate,({returnValue:e})=>{t._plugins.push(e)}),t._callSyncHook(t._plugins,t._extends,n.$.OnConnect),t}setGlobalSlardarName(e){this._instance.setGlobalSlardarName?.(e)}_inject(e){this._instance=e,this._injected=!0}_setConfigInjector(e){this._configInjector=e}assertInjected(){if(!this._injected)throw Error("[Slardar] instance has not injected into container")}init(e){let t=this._configInjector();this._doInit({...t,...e})}async _doInit(e){if(this._inited)return;this.assertInjected(),this._callSyncHook(this._plugins,e,n.$.OnBeforeInit);let t=this._instance;t.context(e.context),t.init(e),this._inited=!0,await this._callAsyncHook(this._plugins,e,n.$.OnInit),e.autoStart&&this.start()}config(e){return this._instance.config(e)}context(e){this._instance.context(e)}start(){this._instance.start()}captureException(e,t,r){this._instance.captureException(e,t,r)}sendEvent(e){this._instance.sendEvent(e)}sendLog(e){this._instance.sendLog(e)}sendCustomPerfMetric(e){this._instance.sendCustomPerfMetric(e)}sendPageview(e){return this._instance.sendPageview?.(e)}on(e,t){this._instance.on(e,t)}rawInstance(){return this._instance.rawInstance()}use(e){this._plugins.push(e),this._callSyncHook([e],this._extends,n.$.OnConnect)}_callSyncHook(e,t,r,n=o){e.forEach((e,i)=>{let o=e[r];if(o){let r=o.call(e,{data:t,container:this});n({plugin:e,index:i,returnValue:r})}})}_callAsyncHook(e,t,r){let n=[];return e.forEach(e=>{let i=e[r];if(i){let r=i.call(e,{data:t,container:this});r&&"then"in r&&n.push(r)}}),Promise.all(n).catch(e=>console.error(e))}reportActualFMP(){let e=this.ttap.reportActualFMP?.();return this.sparkTracing?.reportActualFMP(),e??0}reportActualLCP(){throw Error("not implement")}reportCustomRequest(e,t,r){throw Error("not implement")}getContainerInitTotalTime(){throw Error("not implement")}reportFirstScreenRequest(e,t){throw Error("not implement")}reportRenderStart(){throw Error("not implement")}reportRenderEnd(){throw Error("not implement")}reportRouteRenderStart(){throw Error("not implement")}reportRouteRenderEnd(){throw Error("not implement")}reportPageReady(){throw Error("not implement")}reportStabilityEvent(e){throw Error("not implement")}reportStabilityStack(e){throw Error("not implement")}reportPageCrash(e){throw Error("not implement")}reportComponentCrash(e){throw Error("not implement")}reportCrash(e){throw Error("not implement")}constructor(e="global"){this._instance=i,this._injected=!1,this._plugins=[],this._configInjector=()=>null,this._inited=!1,this._extends=(e,t)=>{this[e]=t},this.ttap={},this._prefix=e}}},54377:function(e,t,r){"use strict";r.d(t,{m:function(){return o}});let n={};function i(e){return window[e]}class o{setGlobalSlardarName(e){this._globalSlardarName=e,this._onSlardarLoaded()}_onSlardarLoaded(){if(!this._createNew)return;let{loaded:e,initPromise:t,instanceGetter:r}=function(e){let t=n[e]||function(e){let t="function"==typeof window[e].create,r=t?Promise.resolve(!0):new Promise(r=>{window[e]("on","init",()=>{t=!0,r(!0)})});return{slardarName:e,loaded:t,initPromise:r,instanceGetter:i.bind(null,e)}}(e);return n[e]=t,t}(this._globalSlardarName);if(e){let e=r().create();this._instanceGetter=()=>e;return}let o=function(){let e=[],t=function(...r){t.mock?e.push(r):(Object.setPrototypeOf(t,t.slardar),t.slardar(...r))};return t.flush=function(r){e.forEach(e=>{r.apply(r,e)}),t.mock=!1,t.slardar=r},t.mock=!0,t}();this._instanceGetter=()=>o,t.then(()=>{let e=r().create();this._instanceGetter().flush(e),this._instanceGetter=()=>e}).catch(()=>{})}get _instance(){return this._instanceGetter()}rawInstance(){return this._instance}init(e){return this._instance("init",e)}config(e){return this._instance("config",e)}start(){return this._instance("start")}context(e){if(!e)return;let t=this._instance,r=0;if(Object.keys(e).forEach(n=>{void 0===e[n]||null===e[n]?t("context.delete",n):(t("context.set",n,e[n]),r++)}),r>40)return void setTimeout(()=>{let e=Error(`Exceed slardar context maximum count 40. The number of your slardar context is ${r}, slardar will drop all your events.`);throw console.error(e),e},20)}sendPageview(e){return this._instance("sendPageview",e)}captureException(e,t,r){this._instance("captureException",e,t,r)}sendEvent(e){this._instance("sendEvent",e)}sendLog(e){this._instance("sendLog",e)}sendCustomPerfMetric(e){this._instance("sendCustomPerfMetric",e)}on(e,t){return this._instance("on",e,t)}create(e=""){let t=new o(e);return t.setGlobalSlardarName(this._globalSlardarName),t}constructor(e=""){this._globalSlardarName="SlardarWeb",this._instanceGetter=()=>window[this._globalSlardarName],this._createNew=!!e}}},7e4:function(e,t,r){"use strict";var n,i;r.d(t,{$:function(){return n}}),(i=n||(n={})).OnConnect="onConnect",i.OnInit="onInit",i.OnCreate="onCreate",i.OnBeforeInit="onBeforeInit"},45545:function(e,t,r){"use strict";let n;r.d(t,{O:function(){return ed}});var i,o,a,s,u,c,l,d,f,p,v=r(88758),h=r(54377);(i=c||(c={})).TLB_ERROR="tlb error",i.AG_BLOCK="ag block",i.BIZ_CODE_NOT_ZERO="biz code not zero",i.RISK_CONTROL=" risk control",(o=l||(l={}))[o.OK=200]="OK",o[o.AG_BLOCK=403]="AG_BLOCK",(a=d||(d={})).BIZ_STATUS_CODE="biz_status_code",a.BIZ_CODE_HEADER="biz_code_header",a.SYSTEM_ERROR_HEADER="system_error_header",a.STABILITY_ABNORMAL_TYPE="stability_abnormal_type",a.HAS_VERIFY_HEADER="has_verify_header",(s=f||(f={})).CONTENT_TYPE="content-type",s.BIZ_CODE_HEADER="bd-tt-error-code",s.SYSTEM_ERROR="x-tt-system-error",s.RISK_CONTROL="bdturing-verify";let m=[/mcs.*\.tiktok[vw]?\.(com|us|eu)/,"mon.tiktokv.(com|us|eu)"],g=[40001,40002,40003,40004,40005,40006,40007,40008,40009,5e4,50001,50002,50003,6e4],_=["chrome-extension://","moz-extension://","safari-extension://","safari-web-extension://"],y=e=>null==e||"null"===e||""===e||'""'===e,b=e=>{let{bizStatusCode:t,bizCodeHeader:r,systemErrorHeader:n,resBody:i,httpStatus:o,hasVerifyHeader:a,isApi:s}=e;return n?"tlb error":403===o&&void 0!==t&&g.includes(Number(t))?"ag block":a||s&&[200,403].includes(o)&&y(i)?" risk control":(void 0===t||[0,"0"].includes(t))&&(""===r||[0,"0"].includes(r))?void 0:"biz code not zero"},w=(e,t,r,n,i)=>{let o,a=r.response.headers?.["bd-tt-error-code"]??"",s=r.response.headers?.["x-tt-system-error"]??"",u=!!r.response.headers?.["bdturing-verify"],c=!!r.response.headers?.["content-type"]?.includes("application/json"),l=r.response.status;try{let e="string"==typeof t?JSON.parse(t):t;o=i&&!y(t)?i(t,r.request.url):void 0;let n=o?.code??e?.status_code??e?.statusCode??e?.code??e?.status,d=b({resBody:t,bizCodeHeader:a,bizStatusCode:n,systemErrorHeader:s,httpStatus:l,url:r.request.url,hasVerifyHeader:u,isApi:c});r.extra={biz_status_code:void 0===n?"undefined":String(n),...u?{has_verify_header:String(u)}:{},...a?{biz_code_header:String(a)}:{},...s?{system_error_header:String(s)}:{},...d?{stability_abnormal_type:String(d)}:{}}}catch{let e=b({resBody:t,bizCodeHeader:a,httpStatus:l,systemErrorHeader:s,hasVerifyHeader:u,isApi:c});r.extra={...u?{has_verify_header:String(u)}:{},...e?{stability_abnormal_type:String(e)}:{},...a?{biz_code_header:String(a)}:{},...s?{system_error_header:String(s)}:{}}}if(e){let i=Object.values(d);r.extra=new Proxy(r.extra,{set(e,t,r){if(i.includes(t))throw Error(`[solution-slardar-reliability]: extra field '${t}' is frozen, you can report by other field name.`);return e[t]=r,!0}});let o=new Proxy(r,{set(e,t,r){if("extra"===t)throw Error('[solution-slardar-reliability]: cannot assign payload.extra, you can report extra filed like "payload.extra.{fieldName} = {fieldVal}"');return e[t]=r,!0}});try{let r=e(t,o,n);"[object Object]"===Object.prototype.toString.call(r)&&console.error('[solution-slardar-reliability]: return object is forbidden because it will delete the default reliability fields. You can report extra filed like "payload.extra.{fieldName} = {fieldVal}" and return false')}catch(e){console.error(e)}r.extra=o.extra}return!!o?.isError&&!!r.extra&&r.extra},S=(e,t)=>{if(void 0===e)return t;let r=[...e],n=e.map(e=>e.toString());return t.forEach(e=>{n.includes(e.toString())||r.push(e)}),r};var E=r(36154);class R extends Error{constructor(){super("detect cancel")}}class C{constructor(e,{registerTimeout:t=300,detectTimeout:r=3e4,isSpa:n=!0}={}){this._deferred=new E.cY,this._teardownList=[],this._onReportActualFMP=e,this._options={isSpa:n,registerTimeout:t,detectTimeout:r}}async preRegister(e){let t=e=>{if(e instanceof R)return void console.debug("detect canceled");console.error("error",e)};this._options.isSpa&&e.slardar.on("beforeConfig",r=>{let n=performance.now();r.pid&&r.pid!==e.slardar.getState().pid&&(this._deferred.reject(new R),this._deferred=new E.cY,this._deferred.promise.then(t=>{let{fmp:r,elements:i}=t,o=(r<n?performance.now():r)-n;e.slardar.callClient("sendCustomPerfMetric",{name:"ttap_spa_load",value:o}),console.debug("ttap_spa_load",o,null==i?void 0:i[0])}).catch(t).finally(()=>{this._teardown()}),setTimeout(()=>{this._detect()}))});let r=this._deferred.promise.then(e=>{let{fmp:t,elements:r}=e;this._onReportActualFMP(t,r),console.debug("fmp",t,null==r?void 0:r[0])}).catch(t).finally(()=>{this._teardown()});if(this._detect(!0))return r}_detect(e=!1){try{let t=Array.from(document.body.querySelectorAll("[data-fmp]"));if(t.length>0){let{completedImages:r,incompleteImages:n,others:i}=this._classify(t);if(i.length>0){if(e)return this._setTimeout(this._options.registerTimeout),this._detectFCP(i),!0;return this._deferred.resolve({fmp:performance.now(),elements:i}),!1}if(r.length>0){if(e)return this._setTimeout(this._options.registerTimeout),this._detectResponseEndTime(r),!0;return this._deferred.resolve({fmp:performance.now(),elements:r.map(e=>e.element)}),!1}if(n.length>0)return this._setTimeout(this._options.detectTimeout),this._detectLoadedTime(n),!1}let r=new MutationObserver(e=>{let t=e.flatMap(e=>"attributes"===e.type?"data-fmp"===e.attributeName&&"string"==typeof e.target.getAttribute("data-fmp")?[e.target]:[]:Array.from(e.addedNodes).flatMap(e=>e instanceof Element?e.getAttribute("data-fmp")?[e]:Array.from(e.querySelectorAll("[data-fmp]")):[])),{completedImages:r,incompleteImages:n,others:i}=this._classify(Array.from(t));return i.length>0?void this._deferred.resolve({fmp:performance.now(),elements:i}):r.length>0?void this._deferred.resolve({fmp:performance.now(),elements:r.map(e=>e.element)}):n.length>0?void this._detectLoadedTime(n):void 0});r.observe(document.body,{childList:!0,subtree:!0,attributeFilter:["data-fmp"]}),this._teardownList.push(()=>{r.disconnect()}),this._setTimeout(this._options.detectTimeout)}catch(e){this._deferred.reject(e)}return!1}async postRegister(){}_teardown(){try{this._teardownList.forEach(e=>e()),this._teardownList=[]}catch(e){console.error("teardown error",e)}}_classify(e){let t=[],r=[],n=[];return e.forEach(e=>{var i,o;if("IMG"===e.tagName&&(e.src||(null!=(o=null==(i=e.srcset)?void 0:i.length)?o:0)>0))return e.complete?void t.push({image:e,element:e}):void r.push({image:e,element:e});if("VIDEO"===e.tagName&&e.poster){let n=new Image;return(n.src=e.poster,n.complete)?void t.push({image:n,element:e}):void r.push({image:n,element:e})}n.push(e)}),{completedImages:t,incompleteImages:r,others:n}}_detectFCP(e){console.debug("detectFCP");let t=new PerformanceObserver(t=>{let r=t.getEntriesByName("first-contentful-paint")[0];r&&this._deferred.resolve({fmp:r.startTime,elements:e})});t.observe({type:"paint",buffered:!0}),this._teardownList.push(()=>{t.disconnect()})}_detectResponseEndTime(e){console.debug("detectResponseEndTime",e),Promise.allSettled(e.map(({image:e,element:t})=>new Promise((r,n)=>{if(0===e.naturalWidth||0===e.naturalHeight)return void n(Error("Image is not loaded"));if(e.currentSrc.startsWith("data:"))return void r({fmp:performance.now(),elements:[t]});let i=new PerformanceObserver(n=>{let i=n.getEntriesByName(e.currentSrc)[0];i&&r({fmp:i.responseEnd,elements:[t]})});i.observe({type:"resource",buffered:!0}),this._teardownList.push(()=>{i.disconnect()})}))).then(e=>{if(e.every(e=>"rejected"===e.status))return void this._deferred.reject(Error("All images are not loaded"));this._deferred.resolve(e.filter(e=>"fulfilled"===e.status).reduce((e,t)=>t.value.fmp<e.fmp?t.value:e,{fmp:1/0,elements:[]}))})}_detectLoadedTime(e){console.debug("detectLoadedTime",e),e.forEach(({image:e,element:t})=>{let r=()=>{this._deferred.resolve({fmp:performance.now(),elements:[t]})};e.addEventListener("load",r),this._teardownList.push(()=>{e.removeEventListener("load",r)})})}_setTimeout(e){let t=setTimeout(()=>{this._deferred.reject(Error("Timeout"))},e);this._teardownList.push(()=>{clearTimeout(t)})}}class T{_isAfterActualFmp(e){return void 0!==this._actualFmp&&e>this._actualFmp}async preRegister(e){e.slardar.on("beforeSend",e=>{var t,r;if(null!=(r=e.common).context||(r.context={}),void 0===this._actualFmp&&"performance"===e.ev_type&&!0===e.payload.isCustom&&"actual_fmp"===e.payload.name)return this._actualFmp=e.payload.value,e;if("resource"===e.ev_type&&!("resources"in e.payload))return e.common.context[T._ACTUAL_FMP_CONTEXT_KEY]=String(this._isAfterActualFmp(e.payload.responseEnd)),e;if("http"===e.ev_type&&e.payload.response.timing)return e.common.context[T._ACTUAL_FMP_CONTEXT_KEY]=String(this._isAfterActualFmp(e.payload.response.timing.responseEnd)),e;if("custom"===e.ev_type&&"jsb_event"===e.payload.name&&(e.common.context[T._ACTUAL_FMP_CONTEXT_KEY]=String(this._isAfterActualFmp(e.payload.metrics.responseEnd))),"performance_longtask"===e.ev_type){let r=null!=(t=e.payload.longtasks)?t:[];e.common.context[T._ACTUAL_FMP_CONTEXT_KEY]=String(this._isAfterActualFmp(r[0].startTime+r[0].duration))}return e})}async postRegister(){}}T._ACTUAL_FMP_CONTEXT_KEY="ttap_is_actual_fmp_reported",(u=p||(p={})).Js="js",u.Css="css",u.Image="image",u.Font="font",u.Html="html",u.Media="media",u.Other="other";class x{async preRegister(e){e.slardar.on("beforeSend",t=>("performance"===t.ev_type&&!0===t.payload.isCustom&&("container_init_cost"===t.payload.name?this._containerInitTime=t.payload.value:"render_start"===t.payload.name?this._renderStartTime=t.payload.value:"render_end"===t.payload.name?this._renderEndTime=t.payload.value:"route_render_start"===t.payload.name?this._routeRenderStartTime=t.payload.value:"route_render_end"===t.payload.name?this._routeRenderEndTime=t.payload.value:"actual_fmp"===t.payload.name&&(this._actualFMPDuration=t.payload.value,this._sendEvent(e.slardar))),"custom"===t.ev_type&&"event"===t.payload.type&&("ttapplugin_info"===t.payload.name?(this._appParseStartTime=t.payload.metrics.appParseStart,this._vmokReadyToLoadTime=t.payload.metrics.vmokReadyToLoad,this._vmokLoadedTime=t.payload.metrics.vmokLoaded):"ttapplugin_first_screen_request"===t.payload.name?(this._requestStartTime=t.payload.metrics.requestStart,this._requestEndTime=t.payload.metrics.requestEnd):"ttapplugin_inapp_info"===t.payload.name&&(this._containerInitTotalTime=t.payload.metrics.containerInitTotalTime)),t))}async postRegister(){}_sendEvent(e){let t={count:1,ttfb:this._getTTFB(),container_init_cost:this._containerInitTime,container_init_total_time:this._containerInitTotalTime,app_parse_start:this._appParseStartTime,vmok_ready_to_load:this._vmokReadyToLoadTime,vmok_loaded:this._vmokLoadedTime,render_start:this._renderStartTime,render_end:this._renderEndTime,route_render_start:this._routeRenderStartTime,route_render_end:this._routeRenderEndTime,request_start:this._requestStartTime,request_end:this._requestEndTime,actual_fmp:this._actualFMPDuration,...this._getResourceSize()};Promise.resolve().then(()=>e.callClient("sendEvent",{name:x._EVENT_NAME,metrics:Object.fromEntries(Object.entries(t).filter(([,e])=>void 0!==e))}))}_getTTFB(){let e=(0,E.Rd)();if(e)return e.responseEnd-e.startTime}_getResourceSize(){var e;if(void 0===this._actualFMPDuration)return{};let t=this._actualFMPDuration,r={total_size:0,total_transfer_size:0,js_size:0,css_size:0,image_size:0,font_size:0,html_size:0,media_size:0,other_size:0,not_support_size:0},n=window.performance.getEntriesByType("resource"),i=window.performance.getEntriesByType("navigation");return(null==(e=i[0])?void 0:e.encodedBodySize)&&(r.total_size+=i[0].encodedBodySize,r.total_transfer_size+=i[0].transferSize,r.html_size=i[0].encodedBodySize),n.some(e=>{var n;if(e.responseEnd>t)return!1;let i=function(e){let t=e.match(/\/([^\/?#]+\.[^\/?#.]+)(?:\?.*)?$/);return t?t[1]:null}(e.name);if(null===i)return!1;let o=function(e){for(let[t,r]of Object.entries(k))if(r.test(e))return t;return p.Other}(i);if(o!==p.Other&&(0===e.encodedBodySize||e.encodedBodySize>1e9))return r.not_support_size=1,!0;r.total_size+=e.encodedBodySize,r.total_transfer_size+=e.transferSize;let a=`${o}_size`;return r[a]=(null!=(n=r[a])?n:0)+e.encodedBodySize,!1}),1===r.not_support_size?{not_support_size:1}:r}}x._EVENT_NAME="ttapplugin_effective_open_page";let k={[p.Js]:/\.m?js$/i,[p.Css]:/\.css$/i,[p.Html]:/\.html?$/i,[p.Image]:/\.(jpe?g|png|svg|gif|webp|heif|bmp)$/i,[p.Font]:/\.(otf|ttf|eot|woff2?)$/i,[p.Media]:/\.(mp4|webm|mkv|flv|avi|wmv)$/i},O={containerInitCost:{query:e=>{var t;let r=null==(t=e.templateResData)?void 0:t.container_init_cost;return{isResolved:0===r||!!r,val:r}},value:new E.cY},containerInitTotalTime:{query:e=>{let t=0,r=e.containerInitTime;return r&&(t=(0,E.TW)()-parseInt(r)),{isResolved:null!=r,val:t}},value:new E.cY},htmlFromGecko:{query:e=>{var t;let r=null==(t=e.templateResData)?void 0:t.res_from;return{isResolved:!!r,val:{resFrom:r,fromGecko:"gecko"===r?"true":"false"}}},fallback:()=>{var e;let t="serverTiming_unknown",r="unknown";if(!(0,E.un)()){let n=null==(e=null==performance?void 0:performance.getEntriesByType("navigation"))?void 0:e[0];(null==n?void 0:n.serverTiming)&&(t=0===n.serverTiming.length?"serverTiming_true":"serverTiming_false",r=0===n.serverTiming.length?"true":"false")}return{isResolved:!0,val:{resFrom:t,fromGecko:r}}},value:new E.cY},geckoChannelName:{query:e=>{var t;let r=null==(t=e.templateResData)?void 0:t.gecko_channel;return{isResolved:null!=r,val:r}},value:new E.cY},deviceScore:{query:e=>{var t;if((0,E.un)())return{isResolved:!0,val:void 0};let r=null==(t=e.deviceScore)?void 0:t.overall_score;return{isResolved:null!=r,val:{score:null!=r?r:0,scoreRounded:r?Math.floor(r):0}}},value:new E.cY},networkLevel:{query:e=>{let t=e.networkLevel;return{isResolved:null!=t,val:null!=t?t:void 0}},value:new E.cY},appVersion:{query:e=>{let t=e.appVersion;return{isResolved:null!=t,val:t}},value:new E.cY}};function A(e){var t,r,n;let i;try{let r=null==(t=window.__globalprops)?void 0:t.getGlobalProps();if(!(i=JSON.parse(r)))throw Error("no globalProps");return O[e].query(i)}catch{try{let t=null==(n=(r=O[e]).fallback)?void 0:n.call(r);if(t)return t}catch{}return{isResolved:!0,val:void 0}}}let P={};function j(){for(let e of Object.values(P))e()}async function I(e){if(O[e].value.isResolved)return O[e].value.promise;let t=A(e);if(t.isResolved)O[e].value.resolve(t.val);else{let t=function(e,t){let r=`sub_${t}_${Date.now()}_${Math.floor(1e4*Math.random())}`;return P[r]=e,r}(()=>{let r=A(e);r.isResolved&&(O[e].value.resolve(r.val),t&&delete P[t])},e)}return O[e].value.promise}var M=r(14951);let L="<overlong>",D=["type","name","title","alt"];function N(e,t,r){let n=F({performanceMarkPoint:"ActualFMP:end",performanceMeasureName:"ActualFMP",value:t}),{elements:i,attrlist:o}=null!=r?r:{};return e.callClient("sendCustomPerfMetric",{name:"actual_fmp",value:n,extra:{element:i&&i.length>0?function(e,t){try{let r,n=e,i=[],o=0,a=0;for(;n&&o++<5&&(r=function(e,{attrlist:t=D}={}){var r,n;let i,o,a,s,u=[];if(!e||!e.tagName)return"";if(u.push(e.tagName.toLowerCase()),e.id)return`#${e.id}`;let c=e.className;if(c&&"string"==typeof c&&c.length>0)for(s=0,i=c.split(/\s+/);s<i.length;s++)u.push(`.${i[s]}`);for(s=0;s<t.length;s++)o=t[s],(a=e.getAttribute(o))&&u.push(`[${o}="${a}"]`);let l=e,d=1,f=!0;for(;l=l.previousElementSibling;)(null==(r=l.tagName)?void 0:r.toLowerCase())===(null==(n=e.tagName)?void 0:n.toLowerCase())&&(l.className===e.className&&t.every(t=>e.getAttribute(t)===(null==l?void 0:l.getAttribute(t)))&&(f=!1),d++);return d>1&&!f&&u.push(`:nth-of-type(${d})`),u.join("")}(n,t),"html"!==r&&(!(o>1)||!(a+3*i.length+r.length>=256)));)i.push(r.length>=256?L:r),a+=r.length,n=n.parentNode;let s=i.reverse().join(" > ");if(s.length>256)return L;return s}catch(e){return"<unknown>"}}(i[0],{attrlist:o}):"<unknown>"}}),n}function F(e){var t,r;if(!(0,E.RD)())return null!=(t=e.value)?t:Date.now()-(0,E.TW)();try{if(performance.mark(e.performanceMarkPoint,{startTime:e.value}),e.value)return performance.measure(e.performanceMeasureName,{start:0,end:e.value}).duration;return performance.measure(e.performanceMeasureName,{},e.performanceMarkPoint).duration}catch(t){return console.error(t),null!=(r=e.value)?r:Date.now()-(0,E.TW)()}}function q(e,t,r){if(null==t?void 0:t.stderr)try{let n={timestamp:Date.now(),...(null==r?void 0:r.method)&&{method:r.method},...(null==r?void 0:r.source)&&{source:r.source}};e instanceof Error?t.stderr({...n,error:{message:e.message,stack:e.stack,name:e.name}}):"string"==typeof e?t.stderr({...n,error:{message:e}}):t.stderr({...n,...e})}catch{}}let z=new WeakSet;function B(e,t){let{error:r,react:n,errorName:i="unknown",extra:o={}}=t;if(z.has(r)){let t=Y(e);q({message:"Duplicate error report detected and discarded",error:{name:r.name,message:r.message,stack:r.stack},errorName:i},t,{method:"sendCrashEvent",source:"stability_metric"});return}z.add(r);let a=r.name;r.name=i,e.callClient("captureException",{error:r,react:n,extra:{rawErrorType:a,...o}})}let G=null,H=new Map,U=new WeakMap;function W(e){let t=e?H.get(e):G;if(!t)throw Error("Please register the plugin first.");return t}function Y(e){if(!e)return{};let t=U.get(e);if(t)return t;try{let t=W(e);return{stdout:t.stdout,stderr:t.stderr}}catch{return{}}}let $=async e=>{try{if(!("undefined"!=typeof window&&e.slardar&&!H.has(e.slardar)))return Promise.resolve();let{slardar:t,scenario:r}=e,n={register$:new E.cY,slardarClient:t,scenarioInstance:r(t),isAutoDetectFMP:!!e.autoDetectFMP,env:e.env,release:e.release,stdout:e.stdout,stderr:e.stderr};return(e.stdout||e.stderr)&&U.set(t,{stdout:e.stdout,stderr:e.stderr}),K(e,n.slardarClient,n.scenarioInstance,n.register$),G||(G={...n}),H.set(n.slardarClient,n),n.register$.promise}catch(t){return q(t,e,{method:"registerTTAPPlugin",source:"registration"}),Promise.resolve()}};async function V(e,t,r){await e.preRegister(),await Promise.all((null!=t?t:[]).map(e=>e.preRegister({slardar:r})))}async function K(e,t,r,n){var i,o;try{r.setRegisterStart();let s=[new T,new x];e.autoDetectFMP&&s.push(new C((r,n)=>{var i,o,a;let s=W(t);if(!s.slardarClient||!s.scenarioInstance||(null==(o=null==(i=s.slardarClient)?void 0:i.getState())?void 0:o.isSpaRouteCheck))return 0;if(!s.isFirstScreenRequestSent){let e=s.scenarioInstance.getFirstScreenRequests();X(e.filter(e=>e.endTime<r+(0,E.TW)()),s)}s.actualFMPDuration||(s.actualFMPDuration=N(s.slardarClient,r,{elements:n,attrlist:"boolean"==typeof e.autoDetectFMP||null==(a=e.autoDetectFMP)?void 0:a.attrlist}),(0,M.m)("actualFmp",s.actualFMPDuration))},{..."boolean"==typeof e.autoDetectFMP?{}:e.autoDetectFMP,isSpa:e.isSpa}));let u=V(r,[...s,...null!=(i=e.extensions)?i:[]],t);await Promise.race([u,(0,E.yy)(300)]),await t.registerClient({disableEnvAutoConfig:e.disableEnvAutoConfig,disableReleaseVersionAutoConfig:e.disableReleaseVersionAutoConfig,env:e.env,release:e.release,isSpa:null!=(o=e.isSpa)&&o,ignoreApiUrl:e.ignoreApiUrl,includeApiUrl:e.includeApiUrl,vmok:e.vmok}),r.setRegisterEnd(),n.resolve(),await (0,E.yy)(1);var a=e.extensions;for(let e of(r.postRegister(),null!=a?a:[]))e.postRegister({slardar:t,subscribeMetric:M.B,scenarioState:r.getState()})}catch(t){q(t,e,{method:"registerClient",source:"registration"}),n.resolve()}}function X(e,t){var r,n;!t.slardarClient||t.isFirstScreenRequestSent||null!=(n=null==(r=t.slardarClient)?void 0:r.getState())&&n.isSpaRouteCheck||0!==e.length&&(!function(e,t){if(0===e.length)return;let r=Math.min(...e.map(e=>e.startTime))-(0,E.TW)(),n=Math.max(...e.map(e=>e.endTime))-(0,E.TW)();t.callClient("sendEvent",{name:"ttapplugin_first_screen_request",metrics:{requestStart:r,requestEnd:n,duration:n-r}})}(e,t.slardarClient),t.isFirstScreenRequestSent=!0)}let J=e=>{var t,r;try{let n=W(e);if(!n.slardarClient||!n.scenarioInstance||n.isAutoDetectFMP||(null==(r=null==(t=n.slardarClient)?void 0:t.getState())?void 0:r.isSpaRouteCheck))return 0;if(!n.isFirstScreenRequestSent){let e=n.scenarioInstance.getFirstScreenRequests();X(e,n)}return n.actualFMPDuration||(n.actualFMPDuration=N(n.slardarClient),(0,M.m)("actualFmp",n.actualFMPDuration)),n.actualFMPDuration}catch{return 0}},Z=()=>I("containerInitTotalTime");class Q{constructor(e){this._state={bid:void 0,pid:void 0,isSpaRouteCheck:!1,ignoreApiUrl:[/mcs.*\.tiktok[vw]?\.(com|us|eu)/,/mon\.tiktokv\.(com|us|eu)/],includeApiUrl:[],vmok:void 0},this._tempSlardarCalls=[],this._tempSlardarOns=[],this._isReady=!1,this._hasAdditionalContext=!1,this.callClient=(e,t)=>{this._isReady?this._callSlardarWeb(e,t):this._tempSlardarCalls.push({m:e,e:t})},this.on=(e,t)=>{this._isReady?this._onSlardarWeb(e,t):this._tempSlardarOns.push({e,handler:t})},this._flushTempSlardarCalls=()=>{this._tempSlardarCalls.forEach(({m:e,e:t})=>{this.callClient(e,t)}),this._tempSlardarCalls=[]},this._flushTempSlardarOns=()=>{this._tempSlardarOns.forEach(({e,handler:t})=>{this.on(e,t)}),this._tempSlardarOns=[]},this._updateConfigSlardarWeb=e=>{var t;null==(t=this._slardarClientFn())||t("config",e)},this._callSlardarWeb=(e,t)=>{let r=this._slardarClientFn();if(r){try{let r=Y(this);!function(e,t,r){if(null==t?void 0:t.stdout)try{let n=function(e,t){let r={timestamp:Date.now(),...(null==t?void 0:t.method)&&{method:t.method},...(null==t?void 0:t.type)&&{type:t.type}};return"string"==typeof e?{...r,message:e}:{...r,...e}}(e,r);t.stdout(n)}catch{}}({method:e,payload:t},r,{method:"_callSlardarWeb",type:"slardar_call"})}catch{}if("report"===e)r(e,t);else if("sendEvent"===e)r(e,t);else if("sendCustomPerfMetric"===e)r(e,t);else if("sendLog"===e)r(e,t);else if("captureException"===e){let{error:n,extra:i,react:o}=t;r(e,n,i,o)}}},this._onSlardarWeb=(e,t)=>{let r=this._slardarClientFn();r&&r("on",e,e=>{try{return t(e)}catch(t){try{let e=Y(this);q(t,e,{method:"_onSlardarWeb",source:"slardar_web"})}catch{}return e}})},this._slardarClientFn=e}getState(){return this._state}setState(e,t=!1){var r,n;try{let{bid:i,pid:o}=null!=(n=null==(r=this._slardarClientFn())?void 0:r("config"))?n:{};this._state={...this._state,...e,...t?{bid:i,pid:o}:{}}}catch(e){try{let t=Y(this);q(e,t,{method:"setState",source:"slardar_web"})}catch{}}}deregisterClient(){this._hasAdditionalContext=!1,this._isReady=!1}start(){var e;null==(e=this._slardarClientFn())||e("start")}registerClient(e){let{includeApiUrl:t,ignoreApiUrl:r,vmok:n,isSpa:i}=e,o={},a=this._slardarClientFn();if(!a)return Promise.resolve(!1);if(t&&Array.isArray(t)&&(o.includeApiUrl=[...t]),r&&Array.isArray(r)&&(o.ignoreApiUrl=Array.isArray(o.ignoreApiUrl)?[...o.ignoreApiUrl,...r]:[...r]),(null==n?void 0:n.name)&&(o.vmok=n),this._hasAdditionalContext&&a("on","start",()=>{var e;try{let t=this._slardarClientFn(),r=null!=(e=null==t?void 0:t.getPreStartQueue())?e:[];r.forEach((e,n)=>{var i,o;r[n]={...e,overrides:{...null!=(i=e.overrides)?i:{},context:(null==(o=null==t?void 0:t.context)?void 0:o.toString())||{}}}})}catch{}}),i)try{let{name:e}=(0,E.Rd)()||{};if(e){let t=new URL(e),r=new URL(document.URL);o.isSpaRouteCheck=t.pathname!==r.pathname}a("on","beforeConfig",e=>{var t,r;try{let n=null==e?void 0:e.pid,i=null==(r=null==(t=this._slardarClientFn())?void 0:t("config"))?void 0:r.pid;i&&n&&n!==i&&this.setState({isSpaRouteCheck:!0})}catch(e){}}),a("on","config",()=>{try{this.setState({},!0)}catch{}})}catch(e){try{let t=Y(this);q(e,t,{method:"registerClient",source:"slardar_web"})}catch{}}return new Promise(t=>{a("on","init",()=>{let r=(e=>{try{let t={};if(!e.disableReleaseVersionAutoConfig)try{let r=e.release;r||(r=process.env.BUILD_VERSION),r&&(t.release=r)}catch{}if(!e.disableEnvAutoConfig)try{let r=e.env;r||(r=process.env.CUSTOM_BUILD_ENV),r&&(t.env=r)}catch{}if(Object.keys(t).length>0)return t}catch{}})(e);r&&this._updateConfigSlardarWeb(r),this._isReady=!0,this._flushTempSlardarOns(),this._flushTempSlardarCalls(),this.setState(o,!0),t(!0)})})}updateContext(e,t){let r=this._slardarClientFn();r&&(r("context.set",e,t),this._hasAdditionalContext=!0)}}var ee=r(1948);let et=[],er=!1,en={script:!0,link:!0,img:!0,css:!0},ei={isActualFMPSent:!1},eo=[],ea=async(e,t)=>{try{if((0,E.un)())return;n=(0,M.B)("actualFmp",()=>{ei.isActualFMPSent=!0,null==n||n.unsubscribe(),eo.forEach(e=>{t({path:e.path,fromGecko:e.fromGecko,isFirstScreen:"true",resourceType:"unknown"})}),eo=[]});let r={},i={common:["/gando_libs/","/tiktok_fonts/"],app:[]};e&&i.app.push(e);try{let e=process.env.GECKO_PATH_PREFIX;e&&i.app.push(e)}catch{}try{let e="tiktok/webapp/main";e&&i.app.push(e)}catch{}let o=await I("geckoChannelName");o&&i.app.push(o),new PerformanceObserver(e=>{e.getEntries().forEach(e=>{var n,o,a;let s=null!=(o=null==(n=e.name)?void 0:n.toLowerCase())?o:"";if(s&&!r[s]&&en[e.initiatorType]){let n="unknown";i.common.find(e=>s.includes(e))?n="common":i.app.find(e=>s.includes(e))&&(n="app");let o="unknown";(e.serverTiming&&(o=0===e.serverTiming.length?"true":"false"),r[s]=!0,"unknown"===n)?!ei.isActualFMPSent&&(a={path:e.name,fromGecko:o},eo.push(a),eo.length>5&&eo.shift()):t({path:e.name,fromGecko:o,isFirstScreen:ei.isActualFMPSent?"false":"true",resourceType:n})}else r[s]||(r[s]=!0)})}).observe({type:"resource",buffered:!0})}catch{}},es=async(e,t)=>{if(!e[0])return;for(let r of e)try{!function(e,t){let r={};e.globalConfig({onInvokeStart:e=>{if(!e)return e;let{method:t,params:n}=e;if("sendLogV3"===t)return e;let i=Date.now();return e.ttap_id=`method_${i}_${Math.floor(1e3*Math.random())}`,"fetch"===t||"request"===t?r[e.ttap_id]={request:{method:n.method,url:n.url,timestamp:i},startTimestamp:i}:r[e.ttap_id]={request:void 0,startTimestamp:i},e},onInvokeEnd:e=>{var n,i,o,a;if(!e)return;let{response:s,config:u}=e;if(!u)return;let{method:c,ttap_id:l}=u;if("sendLogV3"===c||!l||!r[l])return;let d=Date.now(),f=Math.round(d-performance.now()),{request:p}=r[l];if(("fetch"===c||"request"===c)&&p){let e=p.timestamp-f,r=d-f,u=r-e,c={is_custom_error:!1,status:null!=(i=null==(n=null==s?void 0:s.data)?void 0:n.httpCode)?i:200,timestamp:d,timing:{name:p.url,startTime:e,requestStart:e,responseStart:r,responseEnd:r,duration:u}},{ignoreApiUrl:l=[],includeApiUrl:v=[]}=null!=(a=null==(o=null==t?void 0:t.getState)?void 0:o.call(t))?a:{};l.length&&l.some(e=>"string"==typeof e?p.url.includes(e):e.test(p.url))||t.callClient("report",{ev_type:"http",payload:{api:"jsbridge",request:p,response:c,duration:u}}),!er&&(l.length||v.length?v.length?v.some(e=>"string"==typeof e?p.url.includes(e):e.test(p.url))&&et.push({startTime:p.timestamp,endTime:d}):l.some(e=>"string"==typeof e?p.url.includes(e):e.test(p.url))||et.push({startTime:p.timestamp,endTime:d}):et.push({startTime:p.timestamp,endTime:d}))}else t.callClient("sendEvent",{name:"jsb_event",metrics:{duration:d-r[l].startTimestamp,requestStart:r[l].startTimestamp-f,responseEnd:d-f},categories:{jsb_method:c}});delete r[l]}})}(r,t)}catch{}var r=e[0];try{r.on("globalPropsUpdated",j)}catch{}let n=I("appVersion").then(e=>{e&&t.updateContext("app_version",e)}).catch(()=>{}),i=I("deviceScore").then(e=>{e&&t.updateContext("device_score",e.scoreRounded.toString())}).catch(()=>{}),o=I("networkLevel").then(e=>{e&&t.updateContext("network_level",e.toString())}).catch(()=>{});await Promise.all([n,i,o])},eu=()=>(er=!0,et);var ec=r(34646);class el{onConnect(e){let t={reportCustomRequest:(e,t,r)=>(function(e,t,r,n){var i,o,a,s,u;try{let c=W(n);if(!c.slardarClient||(null==(o=null==(i=c.slardarClient)?void 0:i.getState())?void 0:o.isSpaRouteCheck))return;a=e,s=t,u=r,c.slardarClient.callClient("sendEvent",{name:"ttapplugin_custom_request",metrics:{requestStart:s-(0,E.TW)(),requestEnd:u-(0,E.TW)(),duration:u-s},categories:{requestName:a}})}catch{return}})(e,t,r,this.slardarClient),getContainerInitTotalTime:Z,reportFirstScreenRequest:(e,t)=>{X([{startTime:e,endTime:t}],W(this.slardarClient))},reportActualFMP:()=>J(this.slardarClient),reportActualLCP:()=>J(this.slardarClient),reportRenderStart:()=>(e=>{var t,r;try{let n=W(e);if(!n.slardarClient||!n.scenarioInstance||(null==(r=null==(t=n.slardarClient)?void 0:t.getState())?void 0:r.isSpaRouteCheck))return 0;return n.renderStartDuration||(n.renderStartDuration=function(e){let t=F({performanceMarkPoint:"Render:start",performanceMeasureName:"RenderStart"});return e.callClient("sendCustomPerfMetric",{name:"render_start",value:t}),t}(n.slardarClient)),n.renderStartDuration}catch{return 0}})(this.slardarClient),reportRenderEnd:()=>(e=>{var t,r;try{let n=W(e);if(!n.slardarClient||!n.scenarioInstance||(null==(r=null==(t=n.slardarClient)?void 0:t.getState())?void 0:r.isSpaRouteCheck))return 0;return n.renderEndDuration||(n.renderEndDuration=function(e){let t=F({performanceMarkPoint:"Render:end",performanceMeasureName:"RenderEnd"});return e.callClient("sendCustomPerfMetric",{name:"render_end",value:t}),t}(n.slardarClient)),n.renderEndDuration}catch{return 0}})(this.slardarClient),reportRouteRenderStart:()=>(e=>{var t,r;try{let n=W(e);if(!n.slardarClient||!n.scenarioInstance||(null==(r=null==(t=n.slardarClient)?void 0:t.getState())?void 0:r.isSpaRouteCheck))return 0;return n.routeRenderStartDuration||(n.routeRenderStartDuration=function(e){let t=F({performanceMarkPoint:"RouteRender:start",performanceMeasureName:"RouteRenderStart"});return e.callClient("sendCustomPerfMetric",{name:"route_render_start",value:t}),t}(n.slardarClient)),n.routeRenderStartDuration}catch{return 0}})(this.slardarClient),reportRouteRenderEnd:()=>(e=>{var t,r;try{let n=W(e);if(!n.slardarClient||!n.scenarioInstance||(null==(r=null==(t=n.slardarClient)?void 0:t.getState())?void 0:r.isSpaRouteCheck))return 0;return n.routeRenderEndDuration||(n.routeRenderEndDuration=function(e){let t=F({performanceMarkPoint:"RouteRender:end",performanceMeasureName:"RouteRenderEnd"});return e.callClient("sendCustomPerfMetric",{name:"route_render_end",value:t}),t}(n.slardarClient)),n.routeRenderEndDuration}catch{return 0}})(this.slardarClient),reportPageReady:()=>(e=>{try{let t=W(e);if(!t.slardarClient||!t.scenarioInstance)return;t.slardarClient.callClient("sendEvent",{name:"page_ready",metrics:{count:1}})}catch{}})(this.slardarClient),reportStabilityEvent:e=>((e,t)=>{try{let n=W(t);if(!n.slardarClient||!n.scenarioInstance)return;var r=n.slardarClient;let{cuj:i,isEndStep:o,eventName:a,isSuccess:s,statusCode:u,bizCode:c,api:l,errorMsg:d,extra:f}=e;a&&void 0!==s&&r.callClient("sendEvent",{name:"biz_common_stability_event",metrics:{count:1},categories:{event_name:a,is_success:String(s),...i?{cuj:i}:{},...u?{status_code:String(u)}:{},...c?{biz_code:String(c)}:{},...l?{api:l}:{},...d?{error_msg:d}:{},...o?{is_end_step:String(o)}:{},...f||{}}})}catch{}})(e,this.slardarClient),reportStabilityStack:e=>((e,t)=>{try{let n=W(t);if(!n.slardarClient||!n.scenarioInstance)return;var r=n.slardarClient;let{level:i="info",stack:o,title:a}=e;a&&r.callClient("sendLog",{level:i,content:o,extra:{title:a}})}catch{}})(e,this.slardarClient),reportPageCrash:e=>{((e,t)=>{try{let n=W(t);if(!n.slardarClient||!n.scenarioInstance)return;var r=n.slardarClient;let{error:i,react:o}=e;B(r,{error:i,react:o,errorName:"PageRenderError"})}catch{}})(e,this.slardarClient)},reportCrash:e=>{((e,t)=>{try{let r=W(t);if(!r.slardarClient||!r.scenarioInstance)return;let{error:n,react:i,extra:o={},customErrorName:a}=e;B(r.slardarClient,{error:n,react:i,errorName:a,extra:o})}catch(e){}})(e,this.slardarClient)},reportComponentCrash:e=>{((e,t)=>{try{let n=W(t);if(!n.slardarClient||!n.scenarioInstance)return;var r=n.slardarClient;let{error:i,react:o,componentName:a="unknown"}=e;B(r,{error:i,react:o,errorName:"ComponentRenderError",extra:{componentName:a}})}catch{}})(e,this.slardarClient)}};e.data("ttap",t),e.data("reportActualLCP",t.reportActualFMP),e.data("reportCustomRequest",t.reportCustomRequest),e.data("getContainerInitTotalTime",t.getContainerInitTotalTime),e.data("reportFirstScreenRequest",t.reportFirstScreenRequest),e.data("reportRenderStart",t.reportRenderStart),e.data("reportRenderEnd",t.reportRenderEnd),e.data("reportRouteRenderStart",t.reportRouteRenderStart),e.data("reportRouteRenderEnd",t.reportRouteRenderEnd),e.data("reportPageReady",t.reportPageReady),e.data("reportStabilityEvent",t.reportStabilityEvent),e.data("reportStabilityStack",t.reportStabilityStack),e.data("reportPageCrash",t.reportPageCrash),e.data("reportCrash",t.reportCrash)}onInit({container:e,data:t}){let{ttap:r}=t,n=(e=>{if(e())return new Q(e)})(()=>e.rawInstance());return this.slardarClient=n,$({slardar:n,scenario:r?.jsb?((e,t={})=>{let r=[];return Array.isArray(e)?r.push(...e):r.push(e),e=>({setRegisterStart:ee.OF,setRegisterEnd:ee.bK,preRegister:async()=>{await es(r,e)},postRegister:()=>{t.disableGeckoCheck||(I("htmlFromGecko").then(t=>{t&&(e.callClient("sendEvent",{name:"from_gecko",categories:{html:t.fromGecko,resFrom:t.resFrom}}),e.updateContext("htmlResFrom",t.resFrom))}),ea(t.geckoResPath,t=>{e.callClient("sendEvent",{name:"from_gecko",categories:{resource:t.fromGecko,path:t.path,isFirstScreen:t.isFirstScreen,resourceType:t.resourceType}})})),I("containerInitCost").then(t=>{t&&e.callClient("sendCustomPerfMetric",{name:"container_init_cost",value:t})}),Promise.all([I("containerInitTotalTime"),I("deviceScore")]).then(([t,r])=>{let n={};t&&(n.containerInitTotalTime=t),r&&(n.deviceScore=r.score),Object.keys(n).length>0&&e.callClient("sendEvent",{name:"ttapplugin_inapp_info",metrics:n})}),(0,ee.cg)(e)},getFirstScreenRequests:eu,getState:()=>({type:"inapp",jsb:r[0]})})})(r.jsb):(0,ec.L)(),...r})}onCreate(){return new el}constructor(){this.name="ttap_plugin",this.slardarClient=void 0}}let ed=new v.b;ed._inject(new h.m),ed.use(new el),ed.use(new class{onBeforeInit({data:e}){void 0===e.plugins&&(e.plugins={});let t=e.plugins.jsError;void 0===t?e.plugins.jsError={ignoreErrors:_}:"boolean"!=typeof t&&(t.ignoreErrors=S(t.ignoreErrors,_)),function(e){let t=e.reliability?.bizCodeHandler;void 0===e.plugins&&(e.plugins={});let r=e.plugins.ajax;if(void 0===r)e.plugins.ajax={extraExtractor:(...e)=>w(void 0,...e,t),ignoreUrls:m};else if("boolean"!=typeof r){let e=r.extraExtractor;r.extraExtractor=function r(n,i,o){return e?.name===r.name?w(void 0,n,i,o,t):w(e,n,i,o,t)},r.ignoreUrls=S(r.ignoreUrls,m)}let n=e.plugins.fetch;if(void 0===n)e.plugins.fetch={extraExtractor:(...e)=>w(void 0,...e,t),ignoreUrls:m};else if("boolean"!=typeof n){let e=n.extraExtractor;n.extraExtractor=function r(n,i,o){return e?.name===r.name?w(void 0,n,i,o,t):w(e,n,i,o,t)},n.ignoreUrls=S(n.ignoreUrls,m)}}(e)}onCreate(){return this}constructor(){this.name="Reliability_ajax_fetch"}})}}]);