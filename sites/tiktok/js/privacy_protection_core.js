!function(){"use strict";var e,t;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(e||(e={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(t||(t={}));const r=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),n=e=>{switch(typeof e){case"undefined":return r.undefined;case"string":return r.string;case"number":return Number.isNaN(e)?r.nan:r.number;case"boolean":return r.boolean;case"function":return r.function;case"bigint":return r.bigint;case"symbol":return r.symbol;case"object":return Array.isArray(e)?r.array:null===e?r.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?r.promise:"undefined"!=typeof Map&&e instanceof Map?r.map:"undefined"!=typeof Set&&e instanceof Set?r.set:"undefined"!=typeof Date&&e instanceof Date?r.date:r.object;default:return r.unknown}},a=e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class i extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){const r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof i))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,e.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}i.create=e=>new i(e);const s=(t,n)=>{let i;switch(t.code){case a.invalid_type:i=t.received===r.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case a.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(t.expected,e.jsonStringifyReplacer)}`;break;case a.unrecognized_keys:i=`Unrecognized key(s) in object: ${e.joinValues(t.keys,", ")}`;break;case a.invalid_union:i="Invalid input";break;case a.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${e.joinValues(t.options)}`;break;case a.invalid_enum_value:i=`Invalid enum value. Expected ${e.joinValues(t.options)}, received '${t.received}'`;break;case a.invalid_arguments:i="Invalid function arguments";break;case a.invalid_return_type:i="Invalid function return type";break;case a.invalid_date:i="Invalid date";break;case a.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(i=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(i=`${i} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?i=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?i=`Invalid input: must end with "${t.validation.endsWith}"`:e.assertNever(t.validation):i="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case a.too_small:i="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type||"bigint"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case a.too_big:i="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case a.custom:i="Invalid input";break;case a.invalid_intersection_types:i="Intersection results could not be merged";break;case a.not_multiple_of:i=`Number must be a multiple of ${t.multipleOf}`;break;case a.not_finite:i="Number must be finite";break;default:i=n.defaultError,e.assertNever(t)}return{message:i}};let o=s;function u(e,t){const r=o,n=(e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],s={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let o="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)o=e(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===s?void 0:s].filter((e=>!!e))});e.common.issues.push(n)}class c{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return l;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return c.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:a}=n;if("aborted"===t.status)return l;if("aborted"===a.status)return l;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!n.alwaysSet||(r[t.value]=a.value)}return{status:e.value,value:r}}}const l=Object.freeze({status:"aborted"}),d=e=>({status:"dirty",value:e}),p=e=>({status:"valid",value:e}),f=e=>"aborted"===e.status,h=e=>"dirty"===e.status,m=e=>"valid"===e.status,v=e=>"undefined"!=typeof Promise&&e instanceof Promise;var y;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(y||(y={}));class g{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _=(e,t)=>{if(m(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new i(e.common.issues);return this._error=t,this._error}}};function b(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:i}=e;return"invalid_enum_value"===t.code?{message:i??a.defaultError}:void 0===a.data?{message:i??n??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:i??r??a.defaultError}},description:a}}class k{get description(){return this._def.description}_getType(e){return n(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new c,ctx:{common:e.parent.common,data:e.data,parsedType:n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(v(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)},a=this._parseSync({data:e,path:r.path,parent:r});return _(r,a)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return m(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then((e=>m(e)?{value:e.value}:{issues:t.common.issues}))}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(v(a)?a:Promise.resolve(a));return _(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:a.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new ye({schema:this,typeName:je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ge.create(this,this._def)}nullable(){return _e.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return re.create(this)}promise(){return ve.create(this,this._def)}or(e){return ie.create([this,e],this._def)}and(e){return oe.create(this,e,this._def)}transform(e){return new ye({...b(this._def),schema:this,typeName:je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new be({...b(this._def),innerType:this,defaultValue:t,typeName:je.ZodDefault})}brand(){return new xe({typeName:je.ZodBranded,type:this,...b(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ke({...b(this._def),innerType:this,catchValue:t,typeName:je.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Oe.create(this,e)}readonly(){return Se.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const w=/^c[^\s-]{8,}$/i,x=/^[0-9a-z]+$/,O=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,j=/^[a-z0-9_-]{21}$/i,E=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,C=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,T=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let A;const N=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,R=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,I=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Z=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,L="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",q=new RegExp(`^${L}$`);function D(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function F(e){let t=`${L}T${D(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function z(e,t){if(!E.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function M(e,t){return!("v4"!==t&&t||!R.test(e))||!("v6"!==t&&t||!P.test(e))}class U extends k{_parse(t){this._def.coerce&&(t.data=String(t.data));if(this._getType(t)!==r.string){const e=this._getOrReturnCtx(t);return u(e,{code:a.invalid_type,expected:r.string,received:e.parsedType}),l}const n=new c;let i;for(const r of this._def.checks)if("min"===r.kind)t.data.length<r.value&&(i=this._getOrReturnCtx(t,i),u(i,{code:a.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if("max"===r.kind)t.data.length>r.value&&(i=this._getOrReturnCtx(t,i),u(i,{code:a.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if("length"===r.kind){const e=t.data.length>r.value,s=t.data.length<r.value;(e||s)&&(i=this._getOrReturnCtx(t,i),e?u(i,{code:a.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):s&&u(i,{code:a.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if("email"===r.kind)T.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"email",code:a.invalid_string,message:r.message}),n.dirty());else if("emoji"===r.kind)A||(A=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),A.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"emoji",code:a.invalid_string,message:r.message}),n.dirty());else if("uuid"===r.kind)S.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"uuid",code:a.invalid_string,message:r.message}),n.dirty());else if("nanoid"===r.kind)j.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"nanoid",code:a.invalid_string,message:r.message}),n.dirty());else if("cuid"===r.kind)w.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"cuid",code:a.invalid_string,message:r.message}),n.dirty());else if("cuid2"===r.kind)x.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"cuid2",code:a.invalid_string,message:r.message}),n.dirty());else if("ulid"===r.kind)O.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"ulid",code:a.invalid_string,message:r.message}),n.dirty());else if("url"===r.kind)try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),u(i,{validation:"url",code:a.invalid_string,message:r.message}),n.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"regex",code:a.invalid_string,message:r.message}),n.dirty())}else if("trim"===r.kind)t.data=t.data.trim();else if("includes"===r.kind)t.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty());else if("toLowerCase"===r.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===r.kind)t.data=t.data.toUpperCase();else if("startsWith"===r.kind)t.data.startsWith(r.value)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty());else if("endsWith"===r.kind)t.data.endsWith(r.value)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty());else if("datetime"===r.kind){F(r).test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:"datetime",message:r.message}),n.dirty())}else if("date"===r.kind){q.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:"date",message:r.message}),n.dirty())}else if("time"===r.kind){new RegExp(`^${D(r)}$`).test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{code:a.invalid_string,validation:"time",message:r.message}),n.dirty())}else"duration"===r.kind?C.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"duration",code:a.invalid_string,message:r.message}),n.dirty()):"ip"===r.kind?(s=t.data,("v4"!==(o=r.version)&&o||!N.test(s))&&("v6"!==o&&o||!I.test(s))&&(i=this._getOrReturnCtx(t,i),u(i,{validation:"ip",code:a.invalid_string,message:r.message}),n.dirty())):"jwt"===r.kind?z(t.data,r.alg)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"jwt",code:a.invalid_string,message:r.message}),n.dirty()):"cidr"===r.kind?M(t.data,r.version)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"cidr",code:a.invalid_string,message:r.message}),n.dirty()):"base64"===r.kind?$.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"base64",code:a.invalid_string,message:r.message}),n.dirty()):"base64url"===r.kind?Z.test(t.data)||(i=this._getOrReturnCtx(t,i),u(i,{validation:"base64url",code:a.invalid_string,message:r.message}),n.dirty()):e.assertNever(r);var s,o;return{status:n.value,value:t.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:a.invalid_string,...y.errToObj(r)})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...y.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...y.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...y.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...y.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new U({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function W(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}U.create=e=>new U({checks:[],typeName:je.ZodString,coerce:e?.coerce??!1,...b(e)});class B extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){this._def.coerce&&(t.data=Number(t.data));if(this._getType(t)!==r.number){const e=this._getOrReturnCtx(t);return u(e,{code:a.invalid_type,expected:r.number,received:e.parsedType}),l}let n;const i=new c;for(const r of this._def.checks)if("int"===r.kind)e.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),u(n,{code:a.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty());else if("min"===r.kind){(r.inclusive?t.data<r.value:t.data<=r.value)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else if("max"===r.kind){(r.inclusive?t.data>r.value:t.data>=r.value)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else"multipleOf"===r.kind?0!==W(t.data,r.value)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):"finite"===r.kind?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),u(n,{code:a.not_finite,message:r.message}),i.dirty()):e.assertNever(r);return{status:i.value,value:t.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,n){return new B({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(n)}]})}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((t=>"int"===t.kind||"multipleOf"===t.kind&&e.isInteger(t.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}B.create=e=>new B({checks:[],typeName:je.ZodNumber,coerce:e?.coerce||!1,...b(e)});class H extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==r.bigint)return this._getInvalidInput(t);let n;const i=new c;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?t.data<r.value:t.data<=r.value)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty())}else if("max"===r.kind){(r.inclusive?t.data>r.value:t.data>=r.value)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty())}else"multipleOf"===r.kind?t.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),u(n,{code:a.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):e.assertNever(r);return{status:i.value,value:t.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.bigint,received:t.parsedType}),l}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,n){return new H({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(n)}]})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>new H({checks:[],typeName:je.ZodBigInt,coerce:e?.coerce??!1,...b(e)});class V extends k{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==r.boolean){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.boolean,received:t.parsedType}),l}return p(e.data)}}V.create=e=>new V({typeName:je.ZodBoolean,coerce:e?.coerce||!1,...b(e)});class K extends k{_parse(t){this._def.coerce&&(t.data=new Date(t.data));if(this._getType(t)!==r.date){const e=this._getOrReturnCtx(t);return u(e,{code:a.invalid_type,expected:r.date,received:e.parsedType}),l}if(Number.isNaN(t.data.getTime())){return u(this._getOrReturnCtx(t),{code:a.invalid_date}),l}const n=new c;let i;for(const r of this._def.checks)"min"===r.kind?t.data.getTime()<r.value&&(i=this._getOrReturnCtx(t,i),u(i,{code:a.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?t.data.getTime()>r.value&&(i=this._getOrReturnCtx(t,i),u(i,{code:a.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):e.assertNever(r);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}K.create=e=>new K({checks:[],coerce:e?.coerce||!1,typeName:je.ZodDate,...b(e)});class J extends k{_parse(e){if(this._getType(e)!==r.symbol){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.symbol,received:t.parsedType}),l}return p(e.data)}}J.create=e=>new J({typeName:je.ZodSymbol,...b(e)});class G extends k{_parse(e){if(this._getType(e)!==r.undefined){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.undefined,received:t.parsedType}),l}return p(e.data)}}G.create=e=>new G({typeName:je.ZodUndefined,...b(e)});class Y extends k{_parse(e){if(this._getType(e)!==r.null){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.null,received:t.parsedType}),l}return p(e.data)}}Y.create=e=>new Y({typeName:je.ZodNull,...b(e)});class X extends k{constructor(){super(...arguments),this._any=!0}_parse(e){return p(e.data)}}X.create=e=>new X({typeName:je.ZodAny,...b(e)});class Q extends k{constructor(){super(...arguments),this._unknown=!0}_parse(e){return p(e.data)}}Q.create=e=>new Q({typeName:je.ZodUnknown,...b(e)});class ee extends k{_parse(e){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.never,received:t.parsedType}),l}}ee.create=e=>new ee({typeName:je.ZodNever,...b(e)});class te extends k{_parse(e){if(this._getType(e)!==r.undefined){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.void,received:t.parsedType}),l}return p(e.data)}}te.create=e=>new te({typeName:je.ZodVoid,...b(e)});class re extends k{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==r.array)return u(t,{code:a.invalid_type,expected:r.array,received:t.parsedType}),l;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,r=t.data.length<i.exactLength.value;(e||r)&&(u(t,{code:e?a.too_big:a.too_small,minimum:r?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(u(t,{code:a.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(u(t,{code:a.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>i.type._parseAsync(new g(t,e,t.path,r))))).then((e=>c.mergeArray(n,e)));const s=[...t.data].map(((e,r)=>i.type._parseSync(new g(t,e,t.path,r))));return c.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new re({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new re({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new re({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}function ne(e){if(e instanceof ae){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ge.create(ne(n))}return new ae({...e._def,shape:()=>t})}return e instanceof re?new re({...e._def,type:ne(e.element)}):e instanceof ge?ge.create(ne(e.unwrap())):e instanceof _e?_e.create(ne(e.unwrap())):e instanceof ue?ue.create(e.items.map((e=>ne(e)))):e}re.create=(e,t)=>new re({type:e,minLength:null,maxLength:null,exactLength:null,typeName:je.ZodArray,...b(t)});class ae extends k{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const t=this._def.shape(),r=e.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(e){if(this._getType(e)!==r.object){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.object,received:t.parsedType}),l}const{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof ee&&"strip"===this._def.unknownKeys))for(const e in n.data)s.includes(e)||o.push(e);const d=[];for(const e of s){const t=i[e],r=n.data[e];d.push({key:{status:"valid",value:e},value:t._parse(new g(n,r,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof ee){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of o)d.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)o.length>0&&(u(n,{code:a.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];d.push({key:{status:"valid",value:t},value:e._parse(new g(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of d){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>c.mergeObjectSync(t,e))):c.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new ae({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:y.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ae({...this._def,unknownKeys:"strip"})}passthrough(){return new ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:je.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ae({...this._def,catchall:e})}pick(t){const r={};for(const n of e.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ae({...this._def,shape:()=>r})}omit(t){const r={};for(const n of e.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new ae({...this._def,shape:()=>r})}deepPartial(){return ne(this)}partial(t){const r={};for(const n of e.objectKeys(this.shape)){const e=this.shape[n];t&&!t[n]?r[n]=e:r[n]=e.optional()}return new ae({...this._def,shape:()=>r})}required(t){const r={};for(const n of e.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof ge;)e=e._def.innerType;r[n]=e}return new ae({...this._def,shape:()=>r})}keyof(){return fe(e.objectKeys(this.shape))}}ae.create=(e,t)=>new ae({shape:()=>e,unknownKeys:"strip",catchall:ee.create(),typeName:je.ZodObject,...b(t)}),ae.strictCreate=(e,t)=>new ae({shape:()=>e,unknownKeys:"strict",catchall:ee.create(),typeName:je.ZodObject,...b(t)}),ae.lazycreate=(e,t)=>new ae({shape:e,unknownKeys:"strip",catchall:ee.create(),typeName:je.ZodObject,...b(t)});class ie extends k{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new i(e.ctx.common.issues)));return u(t,{code:a.invalid_union,unionErrors:r}),l}));{let e;const n=[];for(const a of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=n.map((e=>new i(e)));return u(t,{code:a.invalid_union,unionErrors:s}),l}}get options(){return this._def.options}}function se(t,a){const i=n(t),s=n(a);if(t===a)return{valid:!0,data:t};if(i===r.object&&s===r.object){const r=e.objectKeys(a),n=e.objectKeys(t).filter((e=>-1!==r.indexOf(e))),i={...t,...a};for(const e of n){const r=se(t[e],a[e]);if(!r.valid)return{valid:!1};i[e]=r.data}return{valid:!0,data:i}}if(i===r.array&&s===r.array){if(t.length!==a.length)return{valid:!1};const e=[];for(let r=0;r<t.length;r++){const n=se(t[r],a[r]);if(!n.valid)return{valid:!1};e.push(n.data)}return{valid:!0,data:e}}return i===r.date&&s===r.date&&+t==+a?{valid:!0,data:t}:{valid:!1}}ie.create=(e,t)=>new ie({options:e,typeName:je.ZodUnion,...b(t)});class oe extends k{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(f(e)||f(n))return l;const i=se(e.value,n.value);return i.valid?((h(e)||h(n))&&t.dirty(),{status:t.value,value:i.data}):(u(r,{code:a.invalid_intersection_types}),l)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}oe.create=(e,t,r)=>new oe({left:e,right:t,typeName:je.ZodIntersection,...b(r)});class ue extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==r.array)return u(n,{code:a.invalid_type,expected:r.array,received:n.parsedType}),l;if(n.data.length<this._def.items.length)return u(n,{code:a.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),l;!this._def.rest&&n.data.length>this._def.items.length&&(u(n,{code:a.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new g(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(i).then((e=>c.mergeArray(t,e))):c.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ue({...this._def,rest:e})}}ue.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ue({items:e,typeName:je.ZodTuple,rest:null,...b(t)})};class ce extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==r.map)return u(n,{code:a.invalid_type,expected:r.map,received:n.parsedType}),l;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map((([e,t],r)=>({key:i._parse(new g(n,e,n.path,[r,"key"])),value:s._parse(new g(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of o){const n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return l;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of o){const n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return l;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}ce.create=(e,t,r)=>new ce({valueType:t,keyType:e,typeName:je.ZodMap,...b(r)});class le extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==r.set)return u(n,{code:a.invalid_type,expected:r.set,received:n.parsedType}),l;const i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(u(n,{code:a.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(u(n,{code:a.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(e){const r=new Set;for(const n of e){if("aborted"===n.status)return l;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const c=[...n.data.values()].map(((e,t)=>s._parse(new g(n,e,n.path,t))));return n.common.async?Promise.all(c).then((e=>o(e))):o(c)}min(e,t){return new le({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new le({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}le.create=(e,t)=>new le({valueType:e,minSize:null,maxSize:null,typeName:je.ZodSet,...b(t)});class de extends k{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}de.create=(e,t)=>new de({getter:e,typeName:je.ZodLazy,...b(t)});class pe extends k{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return u(t,{received:t.data,code:a.invalid_literal,expected:this._def.value}),l}return{status:"valid",value:e.data}}get value(){return this._def.value}}function fe(e,t){return new he({values:e,typeName:je.ZodEnum,...b(t)})}pe.create=(e,t)=>new pe({value:e,typeName:je.ZodLiteral,...b(t)});class he extends k{_parse(t){if("string"!=typeof t.data){const r=this._getOrReturnCtx(t),n=this._def.values;return u(r,{expected:e.joinValues(n),received:r.parsedType,code:a.invalid_type}),l}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const e=this._getOrReturnCtx(t),r=this._def.values;return u(e,{received:e.data,code:a.invalid_enum_value,options:r}),l}return p(t.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return he.create(e,{...this._def,...t})}exclude(e,t=this._def){return he.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}he.create=fe;class me extends k{_parse(t){const n=e.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==r.string&&i.parsedType!==r.number){const t=e.objectValues(n);return u(i,{expected:e.joinValues(t),received:i.parsedType,code:a.invalid_type}),l}if(this._cache||(this._cache=new Set(e.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const t=e.objectValues(n);return u(i,{received:i.data,code:a.invalid_enum_value,options:t}),l}return p(t.data)}get enum(){return this._def.values}}me.create=(e,t)=>new me({values:e,typeName:je.ZodNativeEnum,...b(t)});class ve extends k{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==r.promise&&!1===t.common.async)return u(t,{code:a.invalid_type,expected:r.promise,received:t.parsedType}),l;const n=t.parsedType===r.promise?t.data:Promise.resolve(t.data);return p(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ve.create=(e,t)=>new ve({type:e,typeName:je.ZodPromise,...b(t)});class ye extends k{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:e=>{u(n,e),e.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===r.value)return l;const t=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===t.status?l:"dirty"===t.status||"dirty"===r.value?d(t.value):t}));{if("aborted"===r.value)return l;const t=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===t.status?l:"dirty"===t.status||"dirty"===r.value?d(t.value):t}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const t=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?l:("dirty"===t.status&&r.dirty(),e(t.value),{status:r.value,value:t.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((t=>"aborted"===t.status?l:("dirty"===t.status&&r.dirty(),e(t.value).then((()=>({status:r.value,value:t.value}))))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!m(e))return l;const t=a.transform(e.value,i);if(t instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:t}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>m(e)?Promise.resolve(a.transform(e.value,i)).then((e=>({status:r.value,value:e}))):l))}e.assertNever(a)}}ye.create=(e,t,r)=>new ye({schema:e,typeName:je.ZodEffects,effect:t,...b(r)}),ye.createWithPreprocess=(e,t,r)=>new ye({schema:t,effect:{type:"preprocess",transform:e},typeName:je.ZodEffects,...b(r)});class ge extends k{_parse(e){return this._getType(e)===r.undefined?p(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ge.create=(e,t)=>new ge({innerType:e,typeName:je.ZodOptional,...b(t)});class _e extends k{_parse(e){return this._getType(e)===r.null?p(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_e.create=(e,t)=>new _e({innerType:e,typeName:je.ZodNullable,...b(t)});class be extends k{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===r.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}be.create=(e,t)=>new be({innerType:e,typeName:je.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...b(t)});class ke extends k{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return v(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new i(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new i(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ke.create=(e,t)=>new ke({innerType:e,typeName:je.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...b(t)});class we extends k{_parse(e){if(this._getType(e)!==r.nan){const t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:r.nan,received:t.parsedType}),l}return{status:"valid",value:e.data}}}we.create=e=>new we({typeName:je.ZodNaN,...b(e)});class xe extends k{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Oe extends k{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?l:"dirty"===e.status?(t.dirty(),d(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?l:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Oe({in:e,out:t,typeName:je.ZodPipeline})}}class Se extends k{_parse(e){const t=this._def.innerType._parse(e),r=e=>(m(e)&&(e.value=Object.freeze(e.value)),e);return v(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}var je;Se.create=(e,t)=>new Se({innerType:e,typeName:je.ZodReadonly,...b(t)}),ae.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(je||(je={}));const Ee=U.create,Ce=B.create,Te=V.create,Ae=Y.create,Ne=X.create,Re=Q.create;ee.create;const Ie=re.create,Pe=ae.create;ae.strictCreate;const $e=ie.create;oe.create,ue.create;const Ze=de.create,Le=pe.create,qe=he.create;ve.create,ge.create,_e.create;var De="main_thread",Fe="out_app",ze="cookie_set_by_document",Me="cookie_blocked_on_start",Ue="general_fetch",We="request_log",Be="webapi",He="storage_use",Ve="sw_incompat",Ke="proxy_unsupport",Je="frequency",Ge="cost_time",Ye="__PNS_RUNTIME__",Xe="__PNS_SW_CACHE__",Qe="__PNS_SW_CACHE_KEY__",et=Symbol.for("lazyModuleRegistry");function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function at(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var it=function(e,t){if(e)try{return new URL(e,t)}catch(e){return}};function st(){var e,t=null===(e=document.currentScript)||void 0===e?void 0:e.src;try{var r=it(t);return(null==r?void 0:r.searchParams.get("globalName"))||Ye}catch(e){return Ye}}var ot=function(e,t,r){e.splice(0,e.length-r+1),e.push(t)},ut=100;function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st(),t=globalThis[e];return t||(t={pendingEvents:[],pendingConfig:{},pendingListeners:{},errors:[],pushEvent:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:De,a=arguments.length>3?arguments[3]:void 0;ot(t.pendingEvents,{eventName:e,eventDetail:r,source:n,options:a},ut)},pushError:function(e){ot(t.errors,e,20)},pageContextObservers:[]},globalThis[e]=t),t}function lt(){return"undefined"==typeof globalThis}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return lt()?null:ct(e)}function pt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st(),n=document.createElement("script"),a=new URL(e);return a.search="?globalName=".concat(r,"&").concat(Xe,"=1&").concat(Qe,"=").concat(t),n.src=a.toString(),n.crossOrigin="anonymous",n.async=!0,new Promise((function(e,a){n.onload=function(){var n=globalThis[r];if(n){var a=n[et];e((null==a?void 0:a[t])||null)}else e(null)},n.onerror=a,document.head.appendChild(n),document.head.removeChild(n)}))}var ft=function(e){return e&&"function"==typeof e.then};function ht(e,t,r){return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];try{var s=e.apply(void 0,at(a));return s}catch(e){return Ot.error(e),null==t||t(e),r}}}var mt=function(e,t,r){var n=t;if(""!==e&&(n="".concat(e,".").concat(t)),r&&Object.keys(r).length>0){var a,i=(a=Math).max.apply(a,at(Object.keys(r).map(Number)))+1,s=Array.from(nt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){rt(e,t,r[t])}))}return e}({},r),{length:i})),o=s.map((function(e){var t,r=void 0===e?"undefined":(t=e)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t;return"string"===r?"'".concat(e,"'"):"undefined"===r?"":"".concat(e)})).join(",");n="".concat(n,"(").concat(o,")")}return n};function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yt(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=["log","error","warn"];function _t(e){var t={},r=!0,n=!1,a=void 0;try{for(var i,s=function(){var r=i.value;t[r]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i;e()&&(i=console)[r].apply(i,yt(n))}},o=gt[Symbol.iterator]();!(r=(i=o.next()).done);r=!0)s()}catch(e){n=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t}var bt,kt,wt,xt,Ot=_t((function(){return!1})),St=_t((function(){return!1}));_t((function(){return!0})),(kt=bt||(bt={}))[kt.runtime=0]="runtime",kt[kt.compilation=1]="compilation",(xt=wt||(wt={}))[xt.OFF=0]="OFF",xt[xt.SCHEMA=1]="SCHEMA",xt[xt.RAW=2]="RAW";var jt=function(e,t){if("object"!=typeof t||null===t)return!1;if("$eq"in t&&e!==t.$eq||"$ne"in t&&e===t.$ne||"$exists"in t&&void 0===e||void 0!==t.$in&&-1===t.$in.indexOf(e)||void 0!==t.$nin&&-1!==t.$nin.indexOf(e))return!1;var r;try{var n;r="string"==typeof e?e:null!==(n=JSON.stringify(e))&&void 0!==n?n:""}catch(e){return!1}return!(void 0!==t.$regex&&!new RegExp(t.$regex,t.$options).test(r)||void 0!==t.$text&&-1===r.indexOf(t.$text)||void 0!==t.$prefix&&!r.startsWith(t.$prefix)||void 0!==t.$sufnin&&t.$sufnin.some((function(e){return r.endsWith(e)}))||void 0!==t.$sufin&&t.$sufin.every((function(e){return!r.endsWith(e)})))};function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||Rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){if(e){if("string"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Et(e,t):void 0}}var It="2",Pt="5",$t=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|^accept$|^content-type$|password|^sec-|^user-agent$)","i"),Zt=new RegExp("(bearer|session)","i"),Lt=function(e,t){return!(!e||!t)&&($t.test(e)||Zt.test(t))},qt=function(e){return"urlPattern"in e};function Dt(e,t){var r=t.replace,n=t.allowlist,a=t.blocklist,i=t.enableSameOriginBlock,s=!1,o=e.request_url,u=!1;if(r&&(s=(o=function(e,t){var r=e,n=Object.keys(t),a=!0,i=!1,s=void 0;try{for(var o,u=n[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var c=o.value;if(r.startsWith(c)){r=t[c]+e.substring(c.length);break}}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}return r}(o,r))!==e.request_url),(a||n)&&(u=function(e,t){var r=t.blocklist,n=t.allowlist,a=t.enableSameOriginBlock;if(r){var i=e.startsWith(location.origin),s=!0,o=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var d=c.value;if(e.startsWith(d)&&(!i||a&&i))return!0}}catch(e){o=!0,u=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw u}}}if(n&&n.length>0){var p=!1,f=!0,h=!1,m=void 0;try{for(var v,y=n[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value;e.startsWith(g)&&(p=!0)}}catch(e){h=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(h)throw m}}if(!p)return!0}return!1}(o,{allowlist:n,blocklist:a,enableSameOriginBlock:i})),u)e["x-pns-block"]="1",e._blocked=!0;else if(s){var c;e.request_url=o;var l,d,p,f,h=it(o);e.request_host=null!==(l=null==h?void 0:h.host)&&void 0!==l?l:"",e.request_path=null!==(d=null==h?void 0:h.pathname)&&void 0!==d?d:"",e.search=null!==(p=null==h?void 0:h.search)&&void 0!==p?p:"",null!==(f=(c=e)._replaced_fields)&&void 0!==f||(c._replaced_fields=[]),e._replaced_fields.push("url"),e["x-pns-replace"]="1"}return(u||s)&&(e.rule_name=t.ruleName?"".concat(e.rule_name?"".concat(e.rule_name,","):"").concat(t.ruleName):e.rule_name),e}function Ft(e,t){var r=encodeURIComponent(t),n=("?"===e[0]?e.slice(1):e).split("&"),a=!0,i=!1,s=void 0;try{for(var o,u=n[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var c=At(o.value.split("="),2),l=c[0],d=c[1];if(l===r)return decodeURIComponent(d)}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}}function zt(e,t){t.type;var r=t.pattern;switch(t.type){case"body":if(!e._is_json_body)return!1;var n,a=null!==(n=e._parsed_json_body)&&void 0!==n?n:e.body,i=t.field,s=function(e){try{var t=!0,n=!1,a=void 0;try{for(var s,o=i[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){e=e[s.value]}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}catch(e){return!1}return!!jt(e,r)};return ft(a)?a.then(s,(function(){return!1})):s(a);case"url":if(jt(e.request_url,r))return!0;break;case"host":if(jt(e.request_host,r))return!0;break;case"path":if(jt(e.request_path,r))return!0;break;case"search":if(!e.search)return!1;var o=Ft(e.search,t.field);if(jt(o,r))return!0;break;case"header":var u,c;if(jt(null!==(c=null===(u=e.header_map)||void 0===u?void 0:u[t.field])&&void 0!==c?c:"",r))return!0;break;case"method":if(jt(e.method,r))return!0;break;case"source":if(jt(e.source,r))return!0;break;case"destination":if(jt(e.destination,r))return!0}return!1}function Mt(e,t,r,n,a){switch(t.handler){case"replace":return void 0===t.pattern?t.value:function(e,t,r){if(!jt(e,t))return e;if(["$eq","$ne","$exists","$in","$nin"].some((function(e){return e in t})))return r;var n,a="string"==typeof e,i=a?e:null!==(n=JSON.stringify(e))&&void 0!==n?n:"";return void 0!==t.$regex?i=i.replace(new RegExp(t.$regex,t.$options),r):void 0!==t.$text?i=i.replace(t.$text,r):void 0!==t.$prefix&&(i=i.replace(t.$prefix,r)),ht((function(){return a?i:JSON.parse(i)}),void 0,e)()}(r(),t.pattern,t.value);case"remove":return n;case"empty":return a}}function Ut(e,t){var r=e;switch(t.type){case"body":if(!r._is_json_body)return r;var n=t.type,a=t.field,i=function(e){var r,i=void 0===e._parsed_json_body?"body":"_parsed_json_body",s=Mt(0,t,(function(){return function(e,t){try{var r=e,n=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)r=r[s.value]}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}catch(e){}}(e,[i].concat(Nt(a)))}),void 0,null);return function(e,t,r){var n=e;try{var a=t.pop(),i=!0,s=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)n=n[u.value]}catch(e){s=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}n[a]=r}catch(e){}}(e,[i].concat(Nt(a)),s),e._replaced_fields=Nt(null!==(r=e._replaced_fields)&&void 0!==r?r:[]).concat([n]),e._modified=!0,e};return ft(r.body)?r.body.then((function(e){return r.body=e,r})).then(i):i(r);case"url":var s,o=Mt(0,t,(function(){return r.request_url})),u=it(o);r.request_url=o,r.request_host=u.host,r.request_path=u.pathname,r.search=u.search,r._replaced_fields=Nt(null!==(s=r._replaced_fields)&&void 0!==s?s:[]).concat([t.type]);break;case"host":var c,l=Mt(0,t,(function(){return r.request_host}),"",""),d=it(r.request_url);d.host=l,r.request_url=d.href,r.request_host=l,r._replaced_fields=Nt(null!==(c=r._replaced_fields)&&void 0!==c?c:[]).concat(["url"]);break;case"path":var p,f=Mt(0,t,(function(){return r.request_path}),"",""),h=it(r.request_url);h.pathname=f,r.request_url=h.href,r.request_path=f,r._replaced_fields=Nt(null!==(p=r._replaced_fields)&&void 0!==p?p:[]).concat(["url"]);break;case"search":var m,v=Mt(0,t,(function(){return Ft(r.search,t.field)}),void 0,""),y=function(e,t,r){for(var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=encodeURIComponent(t),i="?"===e[0],s=(i?e.slice(1):e).split("&"),o=!1,u=0;u<s.length;u++){var c=At(s[u].split("="),2),l=c[0];if(c[1],l===a){if(o=!0,void 0===r){s.splice(u,1);break}var d=encodeURIComponent(r);s[u]="".concat(a,"=").concat(d);break}}if(n&&!o&&void 0!==r){var p=encodeURIComponent(r);s.push("".concat(a,"=").concat(p))}return"".concat(i?"?":"").concat(s.join("&"))}(r.search,t.field,v),g=it(r.request_url);g.search=y,r.request_url=g.href,r.search=y,r._replaced_fields=Nt(null!==(m=r._replaced_fields)&&void 0!==m?m:[]).concat(["url"]);break;case"header":var _,b,k,w,x=Mt(0,t,(function(){var e;return null===(e=r.header_map)||void 0===e?void 0:e[t.field]}),void 0,"");if(void 0===x)null===(_=r.header_map)||void 0===_||delete _[t.field];else r.header_map=Tt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ct(e,t,r[t])}))}return e}({},null!==(b=r.header_map)&&void 0!==b?b:{}),Ct({},t.field,x));r.header_names=Object.keys(null!==(k=r.header_map)&&void 0!==k?k:{}).join(","),r._replaced_fields=Nt(null!==(w=r._replaced_fields)&&void 0!==w?w:[]).concat([t.type]);break;case"method":var O,S=Mt(0,t,(function(){return r.method}),"","");r.method=S,r._replaced_fields=Nt(null!==(O=r._replaced_fields)&&void 0!==O?O:[]).concat([t.type]);break;default:return r}return r._modified=!0,r}function Wt(e,t){if(t.some((function(e){return"block"===e.handler})))return e._blocked=!0,e._modified=!0,e;var r=e,n=!0,a=!1,i=void 0;try{for(var s,o=function(){var e,t=s.value;if("report"===t.handler)return r._sample_rate=null!==(e=t.value)&&void 0!==e?e:1,"continue";r=ft(r)?r.then((function(e){return Ut(e,t)})):Ut(r,t)},u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)o()}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}var Bt=function(e,t){var r=function(e){return e.rule_name=t.ruleName?"".concat(e.rule_name?"".concat(e.rule_name,","):"").concat(t.ruleName):e.rule_name,e};e._modified=!1;var n,a=function(e,t){var r=!0,n=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=zt(e,s.value);if(!u||!r)return!1;(ft(u)||ft(r))&&(r=Promise.all([u,r]).then((function(e){var t=At(e,2),r=t[0],n=t[1];return r&&n}),(function(){return!1})))}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t.conditions.filter((function(e){return"context"!==e.type})));return ft(a)?a.then((function(n){if(!n)return e;var a=Wt(e,t.handlers);return ft(a)?a.then(r):r(a)})):a?(n=Wt(e,t.handlers),function(e){return ft(n)?n.then(e):e(n)})(r):e};function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location,t=e.href,r=e.host,n=e.pathname,a=e.search,i=e.hash;return{url:t,host:r,path:n,search:a,hash:i}}var Vt=Ne(),Kt=$e([Ee(),Ee().array()]),Jt=$e([Ee(),Ce(),Te(),Ae()]),Gt=Pe({$eq:Jt.optional(),$ne:Jt.optional(),$exists:Te().optional(),$regex:Ee().optional(),$options:Ee().optional(),$text:Ee().optional(),$prefix:Ee().optional(),$sufin:Ie(Ee()).optional(),$sufnin:Ie(Ee()).optional(),$in:Ie(Jt).optional(),$nin:Ie(Jt).optional()}),Yt=$e([Le("context"),Le("self")]),Xt=$e([Le("url"),Le("host"),Le("path"),Le("search"),Le("body"),Le("header"),Le("method"),Le("destination"),Le("source")]);$e([Le("block"),Le("remove"),Le("empty"),Le("replace"),Le("report")]);var Qt,er=Pe({type:Le("self")}).and($e([Pe({handler:Le("report"),value:Ce()}),Pe({handler:Le("report_stack"),value:Ce()}),Pe({handler:Le("block")})])),tr=Pe({type:$e([Le("url"),Le("host"),Le("path"),Le("search"),Le("body"),Le("header"),Le("method"),Le("destination")]),field:$e([Ie($e([Ee(),Ce()])),Ee()]).optional()}).and($e([Pe({handler:Le("replace"),pattern:Gt.optional(),value:Re()}),Pe({handler:$e([Le("remove"),Le("empty")])})])),rr=Pe({type:$e([Yt,Xt]),field:$e([Ee(),Ie($e([Ee(),Ce()]))]).optional(),pattern:Gt}),nr=Pe({$or:Ie(Ze((function(){return Qt}))).optional(),$and:Ie(Ze((function(){return Qt}))).optional(),$not:Ze((function(){return Qt})).optional()}),ar=$e([rr,Pe({pattern:nr})]),ir=rr;Qt=Ze((function(){return ar}));var sr=$e([er,tr]),or=Pe({ruleName:Ee(),priority:Ce().optional(),global:Te().optional(),conditions:Ie(ar),handlers:Ie(sr)}),ur=Pe({ruleName:Ee(),priority:Ce().optional(),global:Te().optional(),conditions:Ie(ir),handlers:Ie(sr)}),cr=Pe({type:Ee().optional(),field:Kt,pattern:Pe({$eq:Jt.optional(),$ne:Jt.optional(),$exists:Te().optional(),$regex:Ee().optional(),$options:Ee().optional(),$text:Ee().optional(),$prefix:Ee().optional(),$sufin:Ie(Jt).optional(),$sufnin:Ie(Jt).optional(),$in:Ie(Jt).optional(),$nin:Ie(Jt).optional(),$or:Ie(Pe({})).optional(),$and:Ie(Pe({})).optional(),$not:Pe({}).optional()})}),lr=er;Pe({ruleName:Ee(),priority:Ce().optional(),global:Te().optional(),conditions:Ie(cr),handlers:Ie(lr)});var dr=Pe({type:Ee(),field:Kt.optional(),pattern:Gt}),pr=Pe({type:Ee(),handler:Ee(),value:Vt.optional(),field:Kt.optional(),pattern:Gt.optional()}),fr=Pe({interval:Ce(),size:Ce(),freqInterval:Ce(),freqSize:Ce(),tenant:Ee().optional(),domain:Ee().optional()}),hr=Pe({enabled:Te().optional(),sampleRate:Ce(),stackSampleRate:Ce().optional(),stackCollectCookies:Ie(Ee()),blockers:Ie(Pe({domains:Ie(Ee()),cookies:Ie(Ee())})),intercept:Ie(or).optional()}),mr=Pe({enabled:Te().optional(),sampleRate:Ce(),stackCollectKeys:Ie(Ee()).optional(),valueRate:Ce()}),vr=Pe({enabled:Te().optional(),apis:Ie(Pe({apiType:qe(["method","attribute_set","attribute_get","constructor"]),sampleRate:Ce(),apiObj:Ee(),apiName:Ee(),block:Te().optional(),blockWithCallbackIdx:Ce().optional(),blockWithCallbackParams:Pe({}).optional(),paramCondition:Pe({}),withStack:Te(),stackRate:Ce(),withRawArguments:Ie(Te()),freqSampleRate:Ce().optional()}))});qe(["OFF","SCHEMA","RAW"]);var yr=Pe({enabled:Te().optional(),enableGeneralReport:Te(),generalRate:Ce(),methods:Pe({})}),gr=Pe({ruleName:Ee(),freqSampleRate:Ce(),urlPattern:Ie(Ee()),reportList:Ie(Ee())});Pe({ruleName:Ee(),priority:Ce().optional(),addReplaceHeader:Te().optional(),conditions:Ie(dr).optional(),handlers:Ie(pr).optional()});var _r=Pe({enabled:Te().optional(),sampleRate:Ce(),fpBody:Ce().optional(),rawVal:Ie(Pe({endpoint:Ie(Ee()),keyPath:Ie(Ee())})).optional(),respHeaders:Ie(Ee()).optional(),intercept:Ie(ur),freq:Ie(gr).optional(),withStack:Ie(Pe({urlPattern:Ie(Ee()),endpoint:Ie(Ee()),rate:Ce()})).optional()}),br=Pe({listener:Ie(Pe({type:qe(["navigation_navigate","a_click","submit_click"]),sampleRate:Ce()}))});function kr(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
kr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),s=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return S()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=b(s,r);if(o){if(o===l)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,s),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function d(){}function p(){}function f(){}var h={};o(h,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(O([])));v&&v!==t&&r.call(v,a)&&(h=v);var y=f.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(a,i,s,o){var u=c(e[a],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,o)}))}o(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=f,o(y,"constructor",f),o(f,"constructor",p),p.displayName=o(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(_.prototype),o(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var s=new _(u(t,r,n,a),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(y),o(y,s,"Generator"),o(y,a,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;w(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sr(e,t,r){return t&&Or(e.prototype,t),r&&Or(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}(e,t)||Tr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(e){return function(e){if(Array.isArray(e))return Ar(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){if(e){if("string"==typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Tr(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}Pe({reporter:fr,cookie:hr,storage:mr,webapi:vr,jsb:yr.optional(),network:_r,event:br.optional()});var Rr=function(){},Ir=function(e){return"object"===wr(e)&&null!==e},Pr=function(e){return"string"==typeof e},$r=function(){var e=Object.prototype.hasOwnProperty;return function(t,r){return e.call(t,r)}}(),Zr=function(e,t,r){$r(e,r)&&(t[r]=e[r])};function Lr(e,t){return e.replace(/./g,(function(e){return Math.random()>t?"*":e}))}function qr(e){return e>Math.random()}function Dr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=(new Error).stack;return null!==(e=null==r?void 0:r.split("\n").slice(t).map((function(e){return e.trim()})).join("\n"))&&void 0!==e?e:""}function Fr(e){var t=e.split("=").slice(1).join("=");try{'"'===t[0]&&(t=t.slice(1,-1)),t=t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}catch(e){}return t}function zr(e,t){var r=ct();return ht(e,(function(e){return r.pushError(e)}),t)}function Mr(e){try{return JSON.parse(e)}catch(e){return}}/iPhone|iPad/.test(navigator.userAgent);var Ur=["/404","/help/","/static/"];function Wr(e){var t=document.head.querySelector(e);if(!t)return null;try{var r=t.content.split(",").reduce((function(e,t){var r=Er(t.split("="),2),n=r[0],a=r[1];return e[n]=a,e}),{});return r}catch(e){return null}}function Br(){var e={},t=Wr("meta[name=pumbaa-web-config]");if(t)for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r],i=t[a];Object.assign(e,jr({},a,["true","false"].includes(i)?"true"===i:i))}else if(document.currentScript){var s=document.currentScript.dataset;Object.assign(e,null!=s?s:{})}return function(e,t){var r,n={},a=Nr(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(Array.isArray(i)){var s,o=Nr(i);try{for(o.s();!(s=o.n()).done;){var u=s.value;Zr(e,n,u)}}catch(e){o.e(e)}finally{o.f()}}else Zr(e,n,i)}}catch(e){a.e(e)}finally{a.f()}return n}(e,["business","env","region","sw","theme","host","rule","sw_version"])}function Hr(){var e=function(e){if("undefined"!=typeof document)for(var t=document.cookie?document.cookie.split("; "):[],r=0;r<t.length;r++){var n=t[r].split("=");try{if(e===decodeURIComponent(n[0]))return Fr(t[r])}catch(e){}}}("cookie-consent");return e?function(e){var t={};try{for(var r=JSON.parse(e),n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];t["cookie_".concat(i)]=r[i]}}catch(e){}return t}(e):{}}function Vr(){var e,t,r=ct();if(!r.pageContext){var n=null!==(t=Wr("meta[name=pumbaa-ctx]"))&&void 0!==t?t:{},a=Br(),i=a.region,s=a.business,o=a.env,u=Hr(),c=Ht(),l=function(){if(window.dataLayer)return{gtm:"1"};var e;return zr((function(){Object.defineProperty(window,"dataLayer",{get:function(){return e},set:function(t){e=t,Jr().updatePageContext({gtm:"1"})}})})),{}}(),d=function(e,t){return"goofy-deploy-app-967"!==e?{}:Ur.some((function(e){return 0===t.indexOf(e)}))?{ftc:"0"}:{ftc:"1",login:"1"}}(s,c.path),p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({region:i,business:s,env:o},u),c),n),l),d);e=function(){Jr().updatePageContext(Ht())},window.addEventListener("popstate",e),["pushState","replaceState"].forEach((function(t){var r=History.prototype[t];History.prototype[t]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.apply(this,n),e()}})),r.pageContext=p}return r.pageContext}var Kr=function(){var e,t;return null!==(t=null===(e=ct())||void 0===e?void 0:e.pageContextObservers)&&void 0!==t?t:[]},Jr=zr((function(){var e,t,r=function(e,t){var r=e(),n=t();return function(e){var t=Object.keys(e),a={},i=!0,s=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;r[l]!==e[l]&&(a[l]=e[l])}}catch(e){s=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}if(0!==Object.keys(a).length){Object.assign(r,a);var d=!0,p=!1,f=void 0;try{for(var h,m=n[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;(void 0===v.fields||v.fields.some((function(e){return void 0!==a[e]})))&&v.func(r)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}}}}(Vr,Kr),n=zr(r);return null!==(e=(t=ct()).updateContext)&&void 0!==e||(t.updateContext=function(e){if(Ir(e)){var t=Object.keys(e).filter((function(e){return Pr(e)})).reduce((function(t,r){return t[r]=e[r],t}),{});n(t)}else;}),{updatePageContext:n,pageContext:Vr()}}),{updatePageContext:function(){},pageContext:Ht()});function Gr(){var e,t,r,n=dt();if(null===n)throw new Error("");if(!n.ruleset){var a=null!==(r=Mr(null!==(t=null===(e=document.getElementById("pumbaa-rule"))||void 0===e?void 0:e.textContent)&&void 0!==t?t:""))&&void 0!==r?r:__ruleset__;void 0===a||("_r"in a&&"string"==typeof a._r?n.ruleset=Mr(function(e){try{return atob(e)}catch(e){return""}}(a._r)):n.ruleset=a)}return n.ruleset}var Yr="plugin_init_error_no_global",Xr={"us-ttp":"mon16-normal-useast5.tiktokv.us","eu-ttp":"mon16-normal-no1a.tiktokv.eu",apsinf:"mon.tiktokv.com",sg:"mon.tiktokv.com",va:"mon.tiktokv.com",gcp:"mon16-normal-no1a.tiktokv.eu",ttp:"mon16-normal-useast5.tiktokv.us"},Qr={bid:"tiktok_pns_web_runtime",domain:"",setConfig:function(e,t,r){var n;r?this.domain=r:e&&(this.domain=null!==(n=Xr[e.toLowerCase()])&&void 0!==n?n:this.domain),t&&(this.bid="".concat(t,"_pns_web_runtime"))}};function en(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function tn(e,t,r,n){return new(r||(r=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function o(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}u((n=n.apply(e,t||[])).next())}))}function rn(e){var t=e.transport,r=e.endpoint,n=e.size,a=void 0===n?10:n,i=e.wait,s=void 0===i?1e3:i,o=[],u=0;function c(){o.length&&(r?(t.post({url:r,data:this.getBatchData()}),o=[]):o=[])}return{getSize:function(){return a},getWait:function(){return s},setSize:function(e){a=e},setWait:function(e){s=e},getEndpoint:function(){return r},setEndpoint:function(e){r=e},send:function(e){o.push(e),o.length>=a&&c.call(this),clearTimeout(u),u=setTimeout(c.bind(this),s)},flushWithBeacon:function(){var e;clearTimeout(u),o.length&&(null===(e=navigator.sendBeacon)||void 0===e||e.call(navigator,this.getEndpoint(),this.getBatchData()),o=[])},getBatchData:function(){return o.length?(e=o,JSON.stringify({ev_type:"batch",list:e})):"";var e},clear:function(){clearTimeout(u),o=[]}}}var nn,an=function(){var e=function(){for(var e=new Array(16),t=0,r=0;r<16;r++)0==(3&r)&&(t=4294967296*Math.random()),e[r]=t>>>((3&r)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);var n=0,a=t;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")}(e)},sn=function(){try{return!!window.localStorage}catch(e){return!1}}(),on=function(e,t){var r,n,a,i=e.sampleRate,s=e.valueRate,o=e.stackCollectKeys,u=null!==(r=null==o?void 0:o.map((function(e){return new RegExp(e)})))&&void 0!==r?r:[],c={sessionStorage:{setItem:new Set,getItem:new Set},localStorage:{setItem:new Set,getItem:new Set}};return n=function(e){var r,n=e.value,a=en(e,["value"]),o=a.key,l=a.storageType,d=a.operateType,p=null===(r=c[l])||void 0===r?void 0:r[d];if(p){if(p.has(o))return;p.add(o)}qr(s)&&"string"==typeof n&&Object.assign(a,{value:Lr(n,.5)}),o&&u.some((function(e){return e.test(o)}))&&Object.assign(a,{stack:Dr(7)}),t.reportCustomizedEvent("storage_use",{},a,{common:{sample_rate:i}})},a=i,function(){if(Math.random()<a)return n.apply(void 0,arguments)}},un="webapi",cn="network",ln="onvisibilitychange"in document&&sn&&"function"==typeof navigator.sendBeacon,dn=function(e){return-1===e?1/0:e},pn=function(e){var t,r,n,a,i,s,o=e.eventDetail;switch(e.type){case un:return mt(o.apiObj,o.apiName,o.paramCondition);case cn:return t=o.url,r=o.method,n=dn(t.indexOf("#")),a=dn(t.indexOf("?")),i=Math.min(n,a),s=t.slice(0,i),"".concat(r.toUpperCase()," ").concat(s);default:return""}},fn=function(){function e(t){var r=this;if(xr(this,e),this.reporter=t,this.timeout=Gr().reporter.freqInterval,this.volume=Gr().reporter.freqSize,this.cache={},this.size=0,this.pause=!1,null!==e._instance)return e._instance;e._instance=this,document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&(r.clear(),e.withPause(t.flush.bind(t))())}))}return Sr(e,[{key:"push",value:function(e){var t,r,n;if(!this.pause){this.size++;var a=pn(e);null!==(t=(n=this.cache)[a])&&void 0!==t||(n[a]={key:a,ts:[],event_type:e.type,sample_rate:null!==(r=e.eventDetail.freqSampleRate)&&void 0!==r?r:1}),this.cache[a].ts.push(e.time),this.size>=this.volume&&this.clear(),this.resetTimer()}}},{key:"clear",value:function(){var e=this;0!==this.size&&(Object.keys(this.cache).map((function(t){var r=e.cache[t],n=r.key,a=r.ts,i=r.event_type,s=r.sample_rate;return{categories:{key:n,event_type:i,start_time:"".concat(a[0]),call_time:a.slice(1).map((function(e,t,r){var n;return e-(null!==(n=r[t-1])&&void 0!==n?n:a[0])})).join(",")},common:{sample_rate:s}}})).forEach((function(t){var r=t.categories,n=t.common;e.reporter.report(Je,{},r,{common:n})})),this.size=0,this.cache={})}},{key:"onTimeout",value:function(){this.clear()}},{key:"resetTimer",value:function(){clearTimeout(this.timeoutID),this.timeoutID=Number(setTimeout(this.onTimeout.bind(this),this.timeout))}}],[{key:"getInstance",value:function(){return e._instance}},{key:"withPause",value:function(t){return ln?function(){var r=e.getInstance();r&&(r.pause=!0);var n=t.apply(void 0,arguments);return r&&(r.pause=!1),n}:t}}]),e}();function hn(e){var t=new fn(e);return null!=nn||(nn=function(e){t.push(e)}),nn}fn._instance=null;var mn="/monitor_browser/collect/batch/",vn=function(e){return"HYBRID_SLARDAR_WEB"+e},yn=function(e){try{var t=fn.withPause(localStorage.getItem.bind(localStorage))(e);if(t&&Pr(t))return JSON.parse(t)}catch(e){}return null},gn=function(e){var t=e.bid,r=e.userId,n=e.deviceId;!function(e,t){try{var r=Pr(t)?t:JSON.stringify(t);fn.withPause(localStorage.setItem.bind(localStorage))(e,r)}catch(e){}}(vn(t),{userId:r,deviceId:n})},_n=function(e,t,r){var n=t.url,a=t.data,i=new r;i.open(e,n,!0),i.setRequestHeader("Content-Type","application/json"),i.send(a)},bn=function(){if("function"==typeof XMLHttpRequest&&"function"==typeof XMLHttpRequest)return XMLHttpRequest},kn=function(){var e=bn();return e?{get:function(t){_n("GET",t,e)},post:function(t){_n("POST",t,e)}}:{get:Rr,post:Rr}},wn=function(){return void 0!==window.fetch?{post:function(e){return function(e){var t=e.url,r=e.data;window.fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:r}).catch((function(e){}))}(e)}}:{post:Rr}},xn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn;return e?"".concat(e&&e.indexOf("//")>=0?"":"https://").concat(e).concat(r).concat(t?"?bid=".concat(t):""):""},On=function(e){try{return Pr(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:".concat(String(e))}},Sn=function(e,t){var r=t.business;if(e&&Ir(e)&&e.name&&Pr(e.name)){var n=Date.now(),a={api:"xhr",request:{method:"get",url:"https://".concat(e.name),timestamp:n},response:{status:200,is_custom_error:!1,timestamp:n},duration:0};if("metrics"in e&&Ir(e.metrics)){var i=e.metrics,s={};for(var o in i){var u=i[o];"number"==typeof u&&(s[o]=String(u))}a.extra=s}if("categories"in e&&Ir(e.categories)){var c=e.categories,l={};for(var d in c){var p=c[d];l[d]=On(p)}r&&Object.assign(l,{__business__:r}),a.request.body=JSON.stringify(l)}return a}},jn=function(){return Ir(window)?window:null};var En=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=vn(e),r=yn(t);if(!r){var n={userId:an(),deviceId:an()};return gn(Object.assign({bid:e},n)),n}return r}(e.bid);return{userId:t.userId,release:"2.0.0.302",deviceId:t.deviceId,sessionId:an(),env:e.env||"production",sample_rate:1}};function Cn(){var e,t,r=jn()&&jn()&&window.location;return r?{url:null===(e=r.href)||void 0===e?void 0:e.split("?")[0],protocol:r.protocol.slice(0,-1),domain:r.hostname,path:r.pathname,query:r.search.substring(1),pid:r.pathname,viewId:(t="_","".concat(t,"_").concat(Date.now()))}:{}}var Tn,An,Nn=function(e){var t=Object.assign(Object.assign({},function(e){var t={bid:""};for(var r in e){var n=e[r];t[r.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))]=n}return t}(Object.assign(Object.assign({},e),Cn()))),{timestamp:Date.now(),sdk_version:"0.0.1",sdk_name:"SDK_SLARDAR_WEB"}),r=Jr().pageContext,n=r.ftc,a=r.login;return n&&(t.context=Object.assign(Object.assign({},t.context),{ftc:n})),a&&(t.context=Object.assign(Object.assign({},t.context),{login:a})),t},Rn=function(e){if(!(e&&Ir(e)&&(t=e,Ir(t)&&"bid"in t)))throw new Error("invalid InitConfig, init failed");var t,r=e.wait,n=e.size,a=e.beforeSend,i=en(e,["wait","size","beforeSend"]),s=En(i),o=Object.assign(Object.assign({},s),i),u=rn({endpoint:xn(o.domain,e.bid),transport:"function"==typeof window.fetch?wn():kn(),wait:r,size:n}),c=function(){var e=Jr().pageContext,t=e.ftc,r=e.env;return"1"===t&&"production"===r},l=function(e){return c()?u.clear():u.send(e)},d={config:function(e){Object.assign(o,e)},sendEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Sn(e,o);r&&this.report({ev_type:"http",payload:r},t)},report:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(e.common||(e.common=Object.assign(Object.assign({},Nn(o)),t.common)),!t.bypassHook&&a&&!a(e))return;l(e)}},reportError:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"js_error"===e.ev_type&&(null!==(t=(r=e.payload).extra)&&void 0!==t||(r.extra={}),e.payload.extra.__business__=o.business||""),this.report(e,{bypassHook:n})},flush:function(){c()?u.clear():u.flushWithBeacon()}};return d},In=["name","message","stack","filename","lineno","colno"],Pn=function(e){var t,r;if(r=Tn,!((t=e)&&r&&t.message&&t.stack&&t.message===r.message&&t.stack===r.stack))return Tn=e,e;Tn=e},$n=function(e){if(performance&&"function"==typeof performance.getEntriesByName)return performance.getEntriesByName(e)[0]},Zn=function(){var e,t,r,n,a=["ftc","login","cb_enabled","gtm"],i=function(e){return a.reduce((function(t,r){return void 0===e[r]?t:Object.assign(Object.assign({},t),jr({},r,e[r]))}),{})},s=Jr().pageContext,o={ref:i(s)};return e=function(e){o.ref=i(e)},t=a,n=ct(),null!==(r=n.pageContextObservers)&&void 0!==r||(n.pageContextObservers=[]),n.pageContextObservers.push({func:e,fields:t}),o},Ln=function(){function e(t){var r=this;xr(this,e),this.handleOpt=function(e){var t;return Object.assign(Object.assign({},e),{common:Object.assign(Object.assign({},null==e?void 0:e.common),{context:Object.assign(Object.assign({},r.ctx.ref),null===(t=e.common)||void 0===t?void 0:t.context)})})},this.report=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.client?r.client.sendEvent({name:e,metrics:t,categories:n},r.handleOpt(a)):Ot.warn("[Reporter] Not ready to report.")},this.reportCustomizedEvent=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.client?r.client.sendEvent({name:e,metrics:t,categories:n},r.handleOpt(a)):Ot.warn("[Reporter] Not ready to report.")},this.reportAbnormality=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.client?r.client.sendEvent({name:"framework_abnormality",metrics:{count:1},categories:{abnormal_type:e,message:null!=t?t:""}},r.handleOpt(n)):Ot.warn("[Reporter] Not ready to report.")},this.reportError=function(e){if(r.client){if(e instanceof Error){if(!Pn(e))return;r.client.reportError({ev_type:"js_error",payload:{error:In.reduce((function(t,r){return"string"==typeof(null==e?void 0:e[r])&&(t[r]=e[r]),t}),{}),breadcrumbs:[]}})}else if(e instanceof Event){var t="string"!=typeof e?e.target||e.srcElement:null;if(!t)return;var n=t.tagName;if(!n||"string"!=typeof n)return;var a=t.src,i={type:"script",url:a,timing:$n(a)};r.client.reportError({ev_type:"resource_error",payload:i})}}else Ot.warn("[Reporter] Not ready to report.")},this.client=Rn(Object.assign({env:"production"},t)),this.ctx=Zn(),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&r.client.flush()})),window.navigation&&window.navigation.addEventListener("navigate",(function(){r.client.flush()}))}return Sr(e,[{key:"config",value:function(e){this.client.config(e)}},{key:"reportPerf",value:function(e){var t;this.client?(t="string"==typeof e?$n(e):e)&&this.client.report({ev_type:"resource",payload:t}):Ot.warn("[Reporter] Not ready to report.")}},{key:"reportPreloadScript",value:function(){if(performance&&"function"==typeof performance.getEntriesByType){var e=performance.getEntriesByType("resource").filter((function(e){return String.prototype.includes.call(e.name,"tiktok_privacy_protection_framework")}));e.length>0&&this.reportPerf(e[0])}}},{key:"flush",value:function(){this.client.flush()}}]),e}(),qn=function(e,t){var r,n;t.registerHandler(ze,(r=t.getReporter(),n="ppe"===Jr().pageContext.env,function(e){var t=e.rawValue.split(";"),a={},i={},s=document.currentScript instanceof HTMLScriptElement?document.currentScript.src:void 0;s&&(a.scriptSrc=s);for(var o=0;o<t.length;o++){var u=Er(t[o].split(/=(.*)/),2),c=u[0],l=u[1],d=c.trim();if(d)if(0!==o){var p=d.toLowerCase();switch(p){case"secure":a[p]="true";break;case"expires":a[p]=String(Date.parse(l));break;default:a[p]=l}}else a.cookie=d,n&&qr(.1)&&(a.value=Lr(l,.5))}e._blocked&&(a.blocked="1",i.blocked=1),e.stack&&(a.stack=e.stack),e._rule_names.length>0&&(a.rule_name=e._rule_names.join(",")),r.reportCustomizedEvent("js_cookie_set",i,a,{common:{sample_rate:e._sample_rate}})})),t.registerHandler(Me,(function(e){var r=e.cookie;t.getReporter().report(Me,{},{cookie:r})}))},Dn=function(e,t){var r;t.registerHandler(Be,(r=t.getReporter(),function(e){var t=e.apiRule,n=e.args,a=e._blocked,i=t.apiObj,s=t.apiName,o=t.withStack,u=t.stackRate,c={callee_obj_path:i,callee_name:s,real_argument_list:t.withRawArguments.map((function(e,t){if(e){var r=n[t];if("function"==typeof n[t])return"__func__";var a="";try{a=JSON.stringify(r)}catch(e){}return a}return""})).join(";")};a&&(c.blocked="1"),Gr().webapi.apis.some((function(e){return void 0!==e.withStack}))&&o&&qr(u)&&Object.assign(c,{stack:Dr(9)}),r.report("webapi",{count:1},c,{common:{sample_rate:e.apiRule.sampleRate}})})),ln&&t.registerHandler(Je,hn(t.getReporter()))},Fn=["tiktok.com","tiktokv.com","byteoversea.com","tiktokglobalshop.com","isnssdk.com"],zn=function(e,t){return zr(Bt,e)(e,t)};!function(e){e[e.SW_READY=0]="SW_READY"}(An||(An={}));var Mn="PerformanceObserver"in window,Un=["xmlhttprequest","fetch","beacon"];function Wn(e,t){var r=e.switcher.activeInterceptRules.map((function(e){return qt(e)?e:Object.assign(Object.assign({},e),{handlers:e.handlers.filter((function(e){return"report"===e.handler}))})}));t.getEntries().forEach((function(t){if(e.isBufferedEntry||!Un.includes(t.initiatorType)){var n=function(e){var t=it(e.name);if(void 0!==t)return{request_url:t.href,request_host:t.host,request_path:t.pathname,method:"UNKNOWN",source:It,search:t.search,_request_time:Math.trunc(e.startTime+performance.timeOrigin),initiator_type:e.initiatorType,resp_status:e.responseStatus,_is_json_body:!1,_sample_rate:0}}(t);if(n){n.perf_buf=e.isBufferedEntry;var a=e.switcher.getState(An.SW_READY);void 0!==a&&(n.sw_ready="".concat(a));var i,s=Object.assign({},n),o=Nr(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;s=qt(u)?Dt(s,u):zn(s,u)}}catch(e){o.e(e)}finally{o.f()}s=Object.assign(Object.assign(Object.assign({},s),n),{_sample_rate:s._sample_rate}),setTimeout((function(){var r,n,a,i;-1===e.securityPolicyViolationURLs.indexOf(t.name)&&(e.switcher.callback.report(s),(null!==(n=null===(r=Gr().network.freq)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0&&e.switcher.callbackEnabled.freq&&(null===(i=(a=e.switcher.callback).freq)||void 0===i||i.call(a,s)))}),100)}}})),e.isBufferedEntry=!1}zr((function(e){var t={isBufferedEntry:!0,securityPolicyViolationURLs:function(){var e=[];return document.addEventListener("securitypolicyviolation",(function(t){var r=it(t.blockedURI);r&&"report"!==t.disposition&&-1===e.indexOf(r.href)&&(100===e.length&&e.shift(),e.push(r.href))})),e}(),switcher:e},r=Mn?new PerformanceObserver((function(e){return Wn(t,e)})):null;try{null==r||r.observe({type:"resource",buffered:!0})}catch(e){Wn(t,{getEntries:function(){return performance.getEntriesByType("resource")}}),null==r||r.observe({entryTypes:["resource"]})}}));var Bn=function(e){return e.startsWith("http")?e:"".concat(location.origin).concat(e)},Hn=function(e,t,r){var n,a=e.fpBody,i=void 0===a?0:a,s=e.rawVal,o=void 0===s?[]:s,u=r.sw,c=r.region,l=t.getReporter();!function(){tn(this,void 0,void 0,kr().mark((function e(){var t,r;return kr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.currentScript?document.currentScript.src.split("/").slice(0,-1).join("/"):""){e.next=3;break}return e.abrupt("return");case 3:return r="".concat(t,"/devtools.js"),e.prev=4,e.next=7,pt(r,"to-json-schema");case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),l.reportError(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))}(),navigator&&"serviceWorker"in navigator?u?navigator.serviceWorker.register(Bn(u)).then((function(e){return Kn().then((function(e){l.report("sw_info",{count:1},{status:"register success",path:Bn(u),supported:"true",existingRegistration:JSON.stringify(e.registration)},{common:{sample_rate:.1}})})).catch((function(e){var t;l.report("sw_info",{count:1},{status:"register success",path:Bn(u),supported:"true",extra:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""},{common:{sample_rate:.1}})})),e.active})).catch((function(e){Kn().then((function(t){var r;l.report("sw_info",{count:1},{status:"register fail",reason:null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"",path:Bn(u),supported:t.supported?"true":"false",existingRegistration:JSON.stringify(t.registration)},{common:{sample_rate:.1}})})).catch((function(t){var r,n;l.report("sw_info",{count:1},{status:"register fail",reason:null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"",path:Bn(u),supported:"true",extra:null!==(n=null==t?void 0:t.message)&&void 0!==n?n:""},{common:{sample_rate:.1}})}))})):l.report("sw_info",{count:1},{status:"sw is empty",path:u?Bn(u):""},{common:{sample_rate:.1}}):l.report("sw_info",{count:1},{status:"not supported",path:u?Bn(u):""},{common:{sample_rate:.1}}),t.registerHandler(Ue,zr((function(e,t,r){var a,s,u,d,p=null==e?void 0:e.eventDetail;if(p){var f=p.body,h=p.contentType,m=void 0===h?null!==(s=null===(a=p.header_map)||void 0===a?void 0:a["content-type"])&&void 0!==s?s:"":h,v=p.request_host,y=p.request_url,g=p.header_map,_=p.search,b=en(p,["body","contentType","request_host","request_url","header_map","search"]);g=function(e){var t={};for(var r in e){var n=e[r];Lt(r,n)||(t[r]=n)}return t}(null!=g?g:{}),b.header_names=Object.keys(g).join(",");var k="",w="";if(v!==Qr.domain||-1===_.indexOf(Qr.bid)){var x,O;if(b.rule_name&&-1!==b.rule_name.indexOf(",")&&(b.rule_name=(x=b.rule_name.split(","),O=x.reduce((function(e,t){return e[t]=null,e}),{}),Object.keys(O)).join(",")),m&&f&&(!Fn.some((function(e){return v.endsWith(e)}))||qr(i))){var S=b.source===Pt&&"string"==typeof f;if((S||-1!==m.indexOf("application/json"))&&n){var j;try{j="string"==typeof f?JSON.parse(f):JSON.parse(JSON.stringify(f))}catch(e){if(!S)throw e}void 0!==j&&(k=JSON.stringify(n(j,function(e,t){var r,n=[],a=Nr(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;i.endpoint.indexOf(t)>-1&&n.push.apply(n,Cr(i.keyPath.map((function(e){return e.split(".")}))))}}catch(e){a.e(e)}finally{a.f()}return n}(o,y.split("?")[0]))))}else if(m.includes("application/x-www-form-urlencoded")||m.includes("multipart/form-data")||f instanceof FormData||f instanceof URLSearchParams){var E=[];"function"==typeof f.forEach?f.forEach((function(e,t){E.push(t)})):"object"===wr(f)&&E.push.apply(E,Cr(Object.keys(f))),w=E.join(",")}}for(var C={region:null!=c?c:"",sw_version:null!==(u=null==e?void 0:e.sw_version)&&void 0!==u?u:"",request_content_type:null!=m?m:"",request_json_body:k,request_form_keys:w,request_host:v,request_url:y,header_map:JSON.stringify(g)},T=0,A=Object.keys(b);T<A.length;T++){var N=A[T];"_"!==N[0]&&("boolean"==typeof b[N]?C[N]=b[N]?"1":"0":"string"==typeof b[N]?C[N]=b[N]:C[N]=JSON.stringify(b[N]))}l.report("general_fetch",{count:1},C,{common:{sample_rate:null!==(d=null==r?void 0:r.sample_rate)&&void 0!==d?d:1}})}}}))),t.registerHandler(We,zr((function(e,t){var r=e.eventDetail;if(r){var n={traceflag:r.resp_header?r.resp_header["x-tt-traceflag"]:"",logid:r.resp_header?r.resp_header["x-tt-logid"]:"",source:r.source,visibilityState:document.visibilityState,requestHost:r.request_host||"",requestPath:r.request_path||"",responseStatus:"".concat(r.resp_status),requestMethod:r.method||"",requestURL:r.request_url||""};l.report(We,{count:1},n,{common:{sample_rate:1}})}}))),t.registerHandler(Ve,zr((function(){l.report("sw_incompat",{count:1},{})}))),ln&&t.registerHandler(Je,hn(t.getReporter()))};function Vn(e,t){return e?{scriptURL:e.scriptURL,state:e.state,isController:e.scriptURL===t}:null}function Kn(){return tn(this,void 0,void 0,kr().mark((function e(){var t,r,n;return kr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"serviceWorker"in navigator){e.next=3;break}return e.abrupt("return",{supported:!1,registration:null});case 3:return e.next=5,navigator.serviceWorker.getRegistration();case 5:if(t=e.sent,r=navigator.serviceWorker.controller,n=r?r.scriptURL:null,t){e.next=12;break}if(!r){e.next=11;break}return e.abrupt("return",{supported:!0,registration:{scope:null,active:{scriptURL:r.scriptURL,state:r.state,isController:!0},waiting:null,installing:null}});case 11:return e.abrupt("return",{supported:!0,registration:null});case 12:return e.abrupt("return",{supported:!0,registration:{scope:t.scope,active:Vn(t.active,n),waiting:Vn(t.waiting,n),installing:Vn(t.installing,n)}});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{supported:!1,registration:null});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))}var Jn,Gn,Yn=zr((function(e){var t;t=e.getReporter(),void 0===window.Proxy&&t.report(Ke,{count:1},{})})),Xn=function(){function e(t){xr(this,e),this.eventHandlers={},this.reporter=t,this.registerDefaultHandlers()}return Sr(e,[{key:"getReporter",value:function(){return this.reporter}},{key:"registerHandler",value:function(e,t){var r,n;null!==(r=(n=this.eventHandlers)[e])&&void 0!==r||(n[e]=[]);var a=this.eventHandlers[e];a.includes(t)||a.push(t)}},{key:"dispatchEvent",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:De,a=arguments.length>3?arguments[3]:void 0,i={eventName:e,eventDetail:t,source:n,options:a},s=this.eventHandlers[i.eventName]||[],o=Nr(s);try{for(o.s();!(r=o.n()).done;){var u=r.value;zr(u)(i.eventDetail,i.source,i.options)}}catch(e){o.e(e)}finally{o.f()}}},{key:"init",value:function(){var e=dt();if(!e)return Ot.warn("monitor exit due to no global context"),void this.reporter.reportAbnormality(Yr);e.pushEvent=this.dispatchEvent.bind(this),e.pushError=this.reporter.reportError.bind(this.reporter);for(var t=e.pendingEvents,r=void 0===t?[]:t,n=e.errors,a=void 0===n?[]:n;null==r?void 0:r.length;){var i=r.shift();this.dispatchEvent(i.eventName,i.eventDetail,i.source,i.options)}for(;null==a?void 0:a.length;){var s=a.shift();this.reporter.reportError(s)}this.reporter.reportPreloadScript()}},{key:"registerDefaultHandlers",value:function(){var e=this;this.registerHandler(Ge,(function(t){e.reporter.reportCustomizedEvent(Ge,t.metrics,t.categories)}))}}]),e}();function Qn(e,t){var r=new Xn(t),n=Gr(),a=(n.cookie,n.storage),i=(n.webapi,n.network);n.event;qn(0,r),function(e,t){sn&&t.registerHandler(He,on(e,t.getReporter()))}(a,r),Dn(0,r),Hn(i,r,e),function(e,t){var r;t.registerHandler("event",(r=t.getReporter(),function(e){var t=e.eventRule,n=e.url,a={type:t.type,url:n};r.report("event",{count:1},a,{common:{sample_rate:e.eventRule.sampleRate}})}))}(0,r),Yn(r),r.init()}try{(Jn=function(){ct();var e=Br(),t=e.business,r=e.env,n=e.region;if(n){var a=Gr().reporter;Qr.setConfig(n,null==a?void 0:a.tenant,null==a?void 0:a.domain);var i=new Ln({bid:Qr.bid,domain:Qr.domain,wait:null==a?void 0:a.interval,size:null==a?void 0:a.size});i.config({business:t,env:r}),Qn(e,i)}},Gn="core",function(){var e=Date.now(),t=Jn.apply(void 0,arguments);return ct().pushEvent(Ge,{metrics:{time:Date.now()-e},categories:{version:"2.0.0.302",runtime_env:Fe,module:Gn}}),t})()}catch(e){St.error("[PumbaaWeb] core execute failed. Errors below.",e)}}();
